(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"/ksR":function(e,t,n){"use strict";n.r(t);var a=n("dZay"),r=n.n(a),o=n("q1tI"),c=n.n(o),l=n("2iEm"),i=n("peh1"),u=n("2/Rp"),s=n("bx4M"),d=n("kPKH"),p=n("+eQT"),f=n("Vl3Y"),m=n("ocjk"),h=n("5rEg"),y=n("kLXV"),g=n("BMrR"),b=n("W9HT"),v=n("EIz2"),w=n("WoGj"),O=n("ayp/"),E=n("bHVt"),k=n("lMyb"),S=n("s5ns"),C=n.n(S),D=n("+KLJ"),j=n("tsqr"),x=n("2fM7"),P=n("Echn"),I=n("sy1d");var T=function(e){return Object(I.a)({method:"post",url:"/ehuodiGateway/utmsTrade/utmsPartGroup/partOder2Group",data:e},{useMock:!1,globalErrorMsg:!0})};function L(e){return(L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){N(e,t,n[t])})}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n,a,r,o,c){try{var l=e[o](c),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(a,r)}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M(e,t){return!t||"object"!==L(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=x.a.Option,z=y.a.confirm;function V(e,t){return Math.round(+e+"e"+t)/Math.pow(10,t)}var q=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=M(this,(e=K(t)).call.apply(e,[this].concat(r)))).state={confirmLoading:!1},n.handleOk=function(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function c(e){_(o,a,r,c,l,"next",e)}function l(e){_(o,a,r,c,l,"throw",e)}c(void 0)})}}(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.form.getFieldsValue(),n.setState({confirmLoading:!0}),e.prev=2,e.next=5,T(F({partOrderIds:n.props.selectedRowKeys},t));case 5:a=e.sent,j.a.success("\u5df2\u5b8c\u6210\u914d\u8f7d"),n.props.okHandle(a),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:return e.prev=12,n.setState({confirmLoading:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[2,10,12,15]])})),n.handleCancel=function(){n.props.form.isFieldsTouched()?z({title:"\u6709\u672a\u4fdd\u5b58\u7684\u4fe1\u606f",content:c.a.createElement("p",null,"\u5982\u653e\u5f03\uff0c\u586b\u5199\u7684\u4fe1\u606f\u5c06\u4e22\u5931"),okText:"\u7ee7\u7eed\u586b\u5199",cancelText:"\u653e\u5f03",onCancel:function(){n.props.cancleHandle()}}):n.props.cancleHandle()},n}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,c.a.PureComponent),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.data,r=a.count,o=a.load,l=a.volume,i=a.orderNum,s=a.recommend,p=t.form,f=t.depotList,h=p.getFieldDecorator,b={labelCol:{span:4},wrapperCol:{span:15}};return c.a.createElement(y.a,{visible:n,title:"\u521b\u5efa\u8ba2\u5355\u7ec4",onOk:this.handleOk,centered:!0,maskClosable:!1,onCancel:this.handleCancel,className:C.a.StowageModel,footer:[c.a.createElement(u.a,{key:"back",onClick:this.handleCancel},"\u53d6\u6d88"),c.a.createElement(u.a,{key:"submit",type:"primary",loading:this.state.confirmLoading,onClick:function(){e.handleOk()}},"\u786e\u5b9a")]},c.a.createElement(g.a,null,c.a.createElement(D.a,{message:"\u5efa\u8bae\u8f66\u578b\uff1a".concat(s),type:"info",showIcon:!0})),c.a.createElement(g.a,null,c.a.createElement(d.a,{xs:12},c.a.createElement("div",{className:C.a.ListTerm},"\u8ba2\u5355\u6570\uff1a"),c.a.createElement("div",{className:C.a.ListDetail},i,"\u4e2a")),c.a.createElement(d.a,{xs:12},c.a.createElement("div",{className:C.a.ListTerm},"\u603b\u4ef6\u6570\uff1a"),c.a.createElement("div",{className:C.a.ListDetail},r,"\u4ef6"))),c.a.createElement(g.a,null,c.a.createElement(d.a,{xs:12},c.a.createElement("div",{className:C.a.ListTerm},"\u603b\u4f53\u79ef\uff1a"),c.a.createElement("div",{className:C.a.ListDetail},l&&V(l,2),"\u65b9")),c.a.createElement(d.a,{xs:12},c.a.createElement("div",{className:C.a.ListTerm},"\u603b\u91cd\u91cf\uff1a"),c.a.createElement("div",{className:C.a.ListDetail},o&&V(o,2),"\u5343\u514b"))),c.a.createElement(m.a,R({},b,{label:"\u4ed3\u5e93\u540d\uff1a"}),h("warehouseId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ed3\u5e93"}]})(c.a.createElement(x.a,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u4ed3\u5e93"},f.map(function(e){return c.a.createElement(G,{value:e.utmsDepotId,key:e.utmsDepotId},e.depotName)})))),c.a.createElement(m.a,R({},b,{label:"\u5206\u7ec4\u540d\u79f0\uff1a"}),h("name",{initialValue:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0",max:50}]})(c.a.createElement(P.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0",maxLength:50}))))}}])&&H(n.prototype,a),r&&H(n,r),t}(),J=f.a.create({mapPropsToFields:function(e){return{name:f.a.createFormField({name:e.data.name}),warehouseId:f.a.createFormField({warehouseId:e.data.warehouseId})}}})(q);function W(e){return(W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Q(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){ee(e,t,n[t])})}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=$({},w.a,{colon:!1}),ne=p.a.RangePicker,ae=k.a.emptyRecord,re=[{title:"\u7b2c\u4e09\u65b9\u5355\u53f7",dataIndex:"thirdSystemId",key:"thirdSystemId",fixed:"left",width:110},{title:"\u8ba2\u5355\u53f7",dataIndex:"orderNumber",key:"orderNumber",render:function(e,t){return o.createElement(l.a,{to:"/ltlOrder/detail?id=".concat(t.utmsPartOrderId)},e)},fixed:"left",width:250},{title:"\u72b6\u6001",dataIndex:"status",key:"status",width:80},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"gmtCreate",key:"gmtCreate",width:190},{title:"\u8981\u6c42\u9001\u8fbe\u65f6\u95f4",dataIndex:"requireDate",key:"requireDate",width:190,render:function(e){return"".concat(e||ae)}},{title:"\u6536\u8d27\u4eba",dataIndex:"contact",key:"contact",width:90},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"phone",key:"phone",width:140},{title:"\u6536\u8d27\u5730\u5740",dataIndex:"address",key:"address"},{title:"\u5ba2\u6237",dataIndex:"customerName",key:"customerName",width:150}],oe={name:"",warehouseId:null,orderNum:0,count:0,volume:0,load:0,isOverload:!1,recommend:""},ce=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Q(this,(e=X(t)).call.apply(e,[this].concat(r)))).state={selectedRowKeys:[],modelData:$({},oe),showModel:!1,skipCount:0,pageSize:15,current:1},n.getDepotHandle=function(e){e.split("?").includes("/stowage")&&n.props.getDepotData()},n.onSelectChange=function(e,t){var a=n.state.modelData,r=a.count,o=a.volume,c=a.load,l=a.isOverload;c=0,o=0,r=0,t.map(function(e){c+=e.goodsWeight,o+=e.goodsVolume,r+=e.goodsNumber}),l=o>50,n.setState({selectedRowKeys:e,modelData:$({},a,{orderNum:e.length,count:r,volume:o,load:c,isOverload:l})})},n.onAllCheckChanged=function(e){var t=n.props.data.toJS();if(e){var a=[];t.map(function(e){a.push(e.utmsPartOrderId)}),n.onSelectChange(a,t)}else n.onSelectChange([],[])},n.reSetHandle=function(){n.props.form.resetFields(),n.searchHandle()},n.paginationChange=function(e){var t=e.skipCount,a=e.pageSize,r=e.current;n.setState({skipCount:t,pageSize:a,current:r}),n.onSelectChange([],[]),n.fetchDataFun({skipCount:t,pageSize:a})},n.searchHandle=function(){n.setState({skipCount:0,current:1}),n.onSelectChange([],[]),n.fetchDataFun()},n.orderToGroupHandle=function(){var e=n.state,t=(e.selectedRowKeys,e.modelData),a=n.vehicleType();n.setState({showModel:!0,modelData:$({},t,{recommend:a})})},n.allowOrderToGroupHandle=function(e){var t=n.state,a=t.skipCount,r=t.pageSize;e.result&&(n.handleCancel(),n.fetchDataFun({skipCount:a,pageSize:r}))},n.handleCancel=function(e){var t={showModel:!1};e||Object.assign(t,{selectedRowKeys:[],modelData:$({},oe)}),n.setState(t)},n}var n,a,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,o["PureComponent"]),n=t,(a=[{key:"componentDidMount",value:function(){this.fetchDataFun(),this.props.getDepotData(),r()("GLOBAL","activeRouteId","change").on(this.getDepotHandle)}},{key:"componentDidUpdate",value:function(e){var t=this;-1===e.depotCount&&0===this.props.depotCount&&y.a.error({title:"\u8df3\u8f6c\u5230\u65b0\u952e\u5730\u5740",content:o.createElement("div",null,o.createElement("p",null,"\u5f53\u524d\u65e0\u4ed3\u5e93\u88c5\u8d27\u4f4d\u7f6e\uff0c\u8bf7\u5148\u521b\u5efa\u4ed3\u5e93\u4f4d\u7f6e")),okText:"\u53bb\u521b\u5efa",onOk:function(){t.props.goAddDepotPage()}})}},{key:"componentWillUnmount",value:function(){r()("GLOBAL","activeRouteId","change").drop(this.getDepotHandle)}},{key:"getFields",value:function(){var e=this.props.form.getFieldDecorator,t={xxl:{span:6},xl:{span:6},md:{span:12},sm:{span:12},xs:{span:24}};return o.createElement(f.a,null,o.createElement(g.a,{gutter:10},o.createElement(d.a,t,o.createElement(m.a,Y({label:"\u5ba2\u6237\u540d\u79f0"},te),e("customerName")(o.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u540d\u79f0"})))),o.createElement(d.a,t,o.createElement(m.a,Y({label:"\u7b2c\u4e09\u65b9\u5355\u53f7"},te),e("thirdSystemId")(o.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u7b2c\u4e09\u65b9\u8ba2\u5355\u53f7"})))),o.createElement(d.a,t,o.createElement(m.a,Y({label:"\u8ba2\u5355\u53f7"},te),e("orderNumber")(o.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7"}))))),o.createElement(g.a,{gutter:10},o.createElement(d.a,t,o.createElement(m.a,Y({label:"\u6536\u8d27\u5730\u5740"},te),e("address")(o.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u6536\u8d27\u5730\u5740"})))),o.createElement(d.a,t,o.createElement(m.a,Y({label:"\u4e0b\u5355\u65f6\u95f4"},te),e("dataRange")(o.createElement(ne,null)))),o.createElement(d.a,t,o.createElement(m.a,te,o.createElement(u.a,{onClick:this.searchHandle,type:"primary",htmlType:"submit",style:{marginRight:"12px",marginLeft:"6px"}},"\u67e5\u8be2"),o.createElement(u.a,{onClick:this.reSetHandle},"\u91cd\u7f6e")))))}},{key:"getTableList",value:function(){var e=this.props,t=e.data,n=e.dataCount,a=e.loading,r=this.state,c=r.modelData.isOverload,l=r.selectedRowKeys,i=r.current,s=t?t.toJS():[],d={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:function(e){return{disabled:"\u5df2\u53d1\u8d27"===e.status,status:e.status}}},p={current:i,total:n,onChange:this.paginationChange,onShowSizeChange:this.paginationChange};return o.createElement(b.a,{spinning:a},o.createElement(v.a,{rowSelection:d,columns:re,dataSource:s,pagination:p,rowKey:"utmsPartOrderId",scroll:{x:1500}}),o.createElement(O.a,{leftChild:o.createElement(O.c,{total:s.length,checked:this.state.selectedRowKeys.length,onAllCheckChanged:this.onAllCheckChanged}),rightChild:o.createElement(O.b,{buttons:[o.createElement(u.a,{key:1,type:"primary",onClick:this.orderToGroupHandle,disabled:c||!l.length},"\u914d\u8f7d\u5230\u7ec4")]})},c?o.createElement("div",{className:C.a.BottomTip},"\u8d85\u8f7d\uff0c\u4e0d\u5141\u8bb8\u6dfb\u52a0\u5206\u7ec4"):null))}},{key:"render",value:function(){var e=this,t=this.props.depotList,n=this.state,a=n.showModel,r=n.modelData,c=n.selectedRowKeys;return o.createElement(s.a,{className:C.a.Stowage},o.createElement("div",{className:C.a.FormWrap},this.getFields()),this.getTableList(),o.createElement(J,{visible:a,okHandle:this.allowOrderToGroupHandle,cancleHandle:function(){e.handleCancel(!0)},data:r,depotList:t,selectedRowKeys:c}))}},{key:"fetchDataFun",value:function(e){var t=this.props.form.getFieldsValue(),n=this.state.pageSize,a=t.dataRange,r=B(t,["dataRange"]),o=a?Object(E.c)(a[0]):void 0,c=a?Object(E.a)(a[1]):void 0;this.props.getAsyncData($({pageSize:n,skipCount:0,createDateStart:o,createDateEnd:c},e,r))}},{key:"vehicleType",value:function(){var e=this.props.vehicleData.toJS(),t=this.state.modelData,n=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;if(l.vehicleVolume>=Number(t.volume))return"".concat(l.vehicleLong/1e3,"\u7c73").concat(l.vehicleType)}}catch(e){a=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return""}}])&&U(n.prototype,a),c&&U(n,c),t}(),le=f.a.create()(ce);t.default=function(e){var t=e.routeId;return(0,e.connectModel)(function(e){var n,a=function(e){return e.get(t)};return{mapStateToProps:Object(i.createStructuredSelector)({data:(n=a,Object(i.createSelector)(n,function(e){return e.get("data")})),vehicleData:function(e){return Object(i.createSelector)(e,function(e){return e.get("vehicleData")})}(a),dataCount:function(e){return Object(i.createSelector)(e,function(e){return e.get("dataCount")})}(a),error:function(e){return Object(i.createSelector)(e,function(e){return e.get("error")})}(a),loading:function(e){return Object(i.createSelector)(e,function(e){return e.get("loading")})}(a),depotList:function(e){return Object(i.createSelector)(e,function(e){return e.get("depotList")})}(a),depotCount:function(e){return Object(i.createSelector)(e,function(e){return e.get("depotCount")})}(a)}),mapDispatchToProps:function(t){return{getAsyncData:function(n){return t(e.getAsyncData(n))},getDepotData:function(){return t(e.getDepotData())},goAddDepotPage:function(){return t(e.goAddDepotPage())}}}}})(le)}},s5ns:function(e,t,n){e.exports={Stowage:"_1wFcY",FormWrap:"_3EtCi",BottomTip:"_3KuaG",ListTerm:"_3tibF",ListDetail:"_97FAY",require:"_2-kdR",StowageModel:"_1tI3F"}}}]);
//# sourceMappingURL=stowage.b2941eee.chunk.js.map