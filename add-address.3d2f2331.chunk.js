(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"1j2L":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n("peh1"),o=n("2/Rp"),i=n("bx4M"),c=n("Vl3Y"),l=n("5rEg"),u=n("kLXV"),s=n("2fM7"),p=n("W9HT"),d=n("SGqP"),m=n("1f+Y"),f=n("NQij"),y=n("fC3X"),h=n.n(y);function b(e){return(b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){E(e,t,n[t])})}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==b(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=u.a.confirm,k=c.a.Item,P=s.a.Option,F=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=D(this,(e=S(t)).call.apply(e,[this].concat(a)))).handleSubmit=function(e){var t=n.props,r=t.form,a=t.searchParams,o=t.addDepotData,i=t.editDepotData,c=t.data.toJS();e.preventDefault(),r.validateFieldsAndScroll(function(e,t){if(!e){var n=t.customerName.split(",");a&&a.utmsDepotId?i(v({utmsDepotId:c.utmsDepotId},t,{customerName:n.length>1?n[1]:c.customerName,customerCode:n.length>1?n[0]:c.customerCode})):o(v({},t,{customerName:n[1],customerCode:n[0]}))}})},n.cancelHandle=function(){var e=n.props.form.isFieldsTouched();n.quitHandle(e)},n.onAddressSelected=function(e){(0,n.props.form.setFieldsValue)({longitude:e?e.lng:"",latitude:e?e.lat:"",province:e?e.province:"",city:e?e.city:"",region:e?e.region:""})},n}var n,a,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,r["PureComponent"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.searchParams,r=t.eventEmitter,a=t.refresh,o=t.routeIds,i=t.goBack;n&&n.utmsDepotId&&this.fetchData(),r.on("close",function(t,n){if("FROM_TAB_CLOSE"===n||"FROM_TAB_REFRESH"===n)e.cancelHandle();else{i(),setTimeout(function(){t()},200);var r=!0,c=!1,l=void 0;try{for(var u,s=o[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var p=u.value;if(p.split("?").includes("/company/addressManage")){a(p);break}}}catch(e){c=!0,l=e}finally{try{r||null==s.return||s.return()}finally{if(c)throw l}}}})}},{key:"componentDidUpdate",value:function(){this.props.saveOk&&this.props.close()}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,n=e.loading,a=this.props.data.toJS(),u=a.customerName,y=a.depotType,b=a.depotName,v=a.contact,E=a.contactWay,O=a.province,D=a.city,S=a.region,w=a.address,j=a.longitude,F=a.latitude,T={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return r.createElement(p.a,{spinning:n},r.createElement(i.a,{className:h.a.AddAddress},r.createElement(c.a,{onSubmit:this.handleSubmit,style:{marginTop:8}},r.createElement(k,g({},T,{label:"\u5ba2\u6237"}),t("customerName",{initialValue:u,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba2\u6237"}]})(r.createElement(m.a,null))),r.createElement(k,g({},T,{label:"\u5730\u5740\u7c7b\u578b"}),t("depotType",{initialValue:y,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5730\u5740\u7c7b\u578b"}]})(r.createElement(s.a,{placeholder:"\u8bf7\u9009\u62e9\u5730\u5740\u7c7b\u578b"},r.createElement(P,{value:"store"},"\u4ed3\u5e93"),r.createElement(P,{value:"site"},"\u7f51\u70b9/\u95e8\u5e97")))),r.createElement(k,g({},T,{label:"\u5730\u5740\u540d\u79f0"}),t("depotName",{initialValue:b,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5730\u5740\u540d\u79f0"}]})(r.createElement(l.a,{placeholder:"\u8bf7\u8f93\u5165\u5730\u5740\u540d\u79f0",maxLength:50}))),r.createElement(k,g({},T,{label:"\u8be6\u7ec6\u5730\u5740"}),t("address",{initialValue:w,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8be6\u7ec6\u5730\u5740"}]})(r.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u6536\u8d27\u5730\u5740",onSelected:this.onAddressSelected}))),r.createElement(k,g({},T,{className:h.a.FormHidden}),t("longitude",{initialValue:j})(r.createElement(l.a,{type:"hidden"}))),r.createElement(k,g({},T,{className:h.a.FormHidden}),t("latitude",{initialValue:F})(r.createElement(l.a,{type:"hidden"}))),r.createElement(k,g({},T,{className:h.a.FormHidden}),t("province",{initialValue:O})(r.createElement(l.a,{type:"hidden"}))),r.createElement(k,g({},T,{className:h.a.FormHidden}),t("city",{initialValue:D})(r.createElement(l.a,{type:"hidden"}))),r.createElement(k,g({},T,{className:h.a.FormHidden}),t("region",{initialValue:S})(r.createElement(l.a,{type:"hidden"}))),r.createElement(k,g({},T,{label:"\u8054\u7cfb\u4eba"}),t("contact",{initialValue:v,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u59d3\u540d",max:20}]})(r.createElement(l.a,{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u59d3\u540d",maxLength:20}))),r.createElement(k,g({},T,{label:"\u8054\u7cfb\u7535\u8bdd"}),t("contactWay",{initialValue:E,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd",pattern:f.a}]})(r.createElement(l.a,{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd",maxLength:20}))),r.createElement(k,g({},{wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},{style:{marginTop:32}}),r.createElement(o.a,{type:"primary",htmlType:"submit",loading:this.submitting},"\u4fdd\u5b58"),r.createElement(o.a,{style:{marginLeft:8},onClick:this.cancelHandle},"\u53d6\u6d88")))))}},{key:"fetchData",value:function(){var e=this.props.searchParams.utmsDepotId;this.props.getAsyncData({utmsDepotId:parseInt(e)})}},{key:"quitHandle",value:function(e){var t=this;e?j({title:"\u6709\u672a\u4fdd\u5b58\u7684\u4fe1\u606f",content:r.createElement("p",null,"\u5982\u653e\u5f03\uff0c\u586b\u5199\u7684\u4fe1\u606f\u5c06\u4e22\u5931"),okText:"\u7ee7\u7eed\u586b\u5199",cancelText:"\u653e\u5f03",onCancel:function(){t.props.close()}}):this.props.close()}}])&&O(n.prototype,a),u&&O(n,u),t}(),T=c.a.create()(F);t.default=function(e){var t=e.routeId;return(0,e.connectModel)(function(e){var n,r=function(e){return e.get(t)};return{mapStateToProps:Object(a.createStructuredSelector)({data:(n=r,Object(a.createSelector)(n,function(e){return e.get("data")})),error:function(e){return Object(a.createSelector)(e,function(e){return e.get("error")})}(r),loading:function(e){return Object(a.createSelector)(e,function(e){return e.get("loading")})}(r),saveOk:function(e){return Object(a.createSelector)(e,function(e){return e.get("saveOk")})}(r),routeIds:function(e){return Object(a.createSelector)(e,function(e){return e.getIn(["route","routeIds"])})}(function(e){return e.get("global")})}),mapDispatchToProps:function(t){return{getAsyncData:function(n){return t(e.getAsyncData(n))},addDepotData:function(n){return t(e.addDepotData(n))},editDepotData:function(n){return t(e.editDepotData(n))},goBack:function(){return t(e.goBack())},saveFields:function(n){return t(e.saveFields(n))}}}}})(T)}},fC3X:function(e,t,n){e.exports={AddAddress:"_1QpFl",FormHidden:"_2VIet"}}}]);
//# sourceMappingURL=add-address.3d2f2331.chunk.js.map