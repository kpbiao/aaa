{"version":3,"sources":["webpack:///./src/modules/module.waybill.map/index.module.less","webpack:///./src/modules/module.waybill.map/ctrls/customPoint.ts","webpack:///./src/modules/module.waybill.map/ctrls/infoWindow.ts","webpack:///./src/modules/module.waybill.map/components/DetailPage/DetailPage.tsx","webpack:///./src/modules/module.waybill.map/index.tsx","webpack:///./src/modules/module.waybill.map/selectors.ts","webpack:///./src/modules/module.waybill.map/ctrls/infoWindow.module.less"],"names":["module","exports","WaybillMap","WaybillMap__box","waybillSidebar","waybillSidebar__toggle","waybillSidebar__down","waybillSidebar__sidebar","waybillSidebar__content","waybillSidebar__userInfo","waybillSidebar__userInfoL","waybillSidebar__userInfoR","waybillSidebar__userInfoName","waybillSidebar__userInfoLine","waybillSidebar__line","waybillSidebar__orderInfo","waybillSidebar__bottomBox","waybillSidebar__Switch","waybillSidebar__orderBox","step5","step4","step3","step2","step6","step1","CustomPoint","_BMap$Overlay","_ref","_this","type","data","onClick","onShowInfo","onHideInfo","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","point","BMap","Point","longitude","latitude","_inherits","Overlay","key","value","map","_this2","div","document","createElement","style","position","width","height","cursor","zIndex","innerHTML","onclick","e","onmouseenter","onmouseout","getPanes","labelPane","appendChild","pixel","pointToOverlayPixel","left","x","pointWidth","top","y","pointHeight","infoWindow_InfoWindow","InfoWindow","infoWindow_classCallCheck","infoWindow_possibleConstructorReturn","infoWindow_getPrototypeOf","infoWindow_inherits","concat","className","infoWindow_module_default","a","divInfoWindow","divCurrow","curr","content","divf","fx","fy","cx","cy","posDiv","parentElement","container","getContainer","mWidth","offsetWidth","mx","offsetHeight","offsetLeft","mt","offsetTop","transform","_get","prototype","draw","undefined","modetxt","mode","time","realtime","slice","showValue","useextendcode","speed","Option","es_select","components_DetailPage_DetailPage","DetailPage","props","DetailPage_classCallCheck","DetailPage_possibleConstructorReturn","DetailPage_getPrototypeOf","state","toggleTopCollapse","setState","topCollapse","toggleBottomCollapse","bottomCollapse","handleChangeFilter","onChange","handleChangeMode","handleChangeSpeed","renderWayList","list","utmsTradeWayPoints","len","length","i","li","reachAddress","reachLat","reachLng","react","loadType","index_module_default","reachDate","push","renderWaybillInfo","_classnames","statusTXT","status","tradeNumber","classnames_default","_defineProperty","renderUserInfo","src","alt","driverName","driverMobilenumber","driverCarStruct","driverCarplatenumber","renderTrack","_this$props","lbsPoints","actualDistance","finishDate","signDate","receiveDate","createDate","handleChangeSwitch","checked","loading","setTimeout","renderPathPlanning","tjnum","es_switch","checkedChildren","unCheckedChildren","defaultChecked","preDistance","wayPointNum","d","address","renderPlayback","_classnames2","row","col","span","defaultValue","gutter","es_button","handlePause","handlePlayback","filter","module_waybill_map_WaybillMap","module_waybill_map_classCallCheck","module_waybill_map_possibleConstructorReturn","module_waybill_map_getPrototypeOf","divMap","infoWindow","lushu","lbsPolyline","locationCP","driving","removeMapElement","element","removeChild","handleInputChange","field","selectLbsTrack","initPlanMarkers","clearOverlays","initReachMarkers","locationMarker","initLbsPolyline","_opts","stop","message","error","_this$state","pts","lbsMarkers","setViewport","margins","start","setPosition","addOverlay","setData","show","hide","onCPClick","cpoint","lbsSource","initMap","selectTradeTrack","searchParams","Object","assign","coordinateType","Map","minZoom","maxZoom","enableMapClick","enableScrollWheelZoom","addEventListener","querySelector","centerAndZoom","nextProps","_this3","shallowequal_default","removeOverlay","_marker","_this$state2","params","partyId","driverId","returnFilterData","datestart","momentfrom_dll_reference_dll_default","format","dateend","collectType","_this4","lng","signLongitude","lat","signLatitude","cp","options","url","pt","icon","Icon","Size","Marker","p1","p3","p","p2","pop","DrivingRoute","renderOptions","autoViewport","policy","search","waypoints","Polyline","strokeColor","strokeWeight","strokeOpacity","BMapLib","LuShu","defaultContent","autoView","anchor","enableRotation","landmarkPois","_this5","_this$props2","spin","spinning","ref","node","__webpack_exports__","routeId","actions","selectState","get","mapStateToProps","libfrom_dll_reference_dll","selectors_makeSelectData","selectors_makeSelectlbsSource","selectors_makeSelectlbsPoints","selectors_makeSelectError","selectors_makeSelectLoading","withConnect","es","dispatch","redux"],"mappings":"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","file":"waybill-map.d9a1b81c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"WaybillMap\":\"RfSkx\",\"WaybillMap__box\":\"bFzir\",\"waybillSidebar\":\"_3eACd\",\"waybillSidebar__toggle\":\"_2maBq\",\"waybillSidebar__down\":\"_36R44\",\"waybillSidebar__sidebar\":\"_1NAXn\",\"waybillSidebar__content\":\"cJ62p\",\"waybillSidebar__userInfo\":\"_1Ugan\",\"waybillSidebar__userInfoL\":\"_1rdWt\",\"waybillSidebar__userInfoR\":\"_1lsF5\",\"waybillSidebar__userInfoName\":\"_2yLIJ\",\"waybillSidebar__userInfoLine\":\"_1jnwE\",\"waybillSidebar__line\":\"ChbQs\",\"waybillSidebar__orderInfo\":\"_2WfPC\",\"waybillSidebar__bottomBox\":\"_3RVzq\",\"waybillSidebar__Switch\":\"l10EX\",\"waybillSidebar__orderBox\":\"_3irqs\",\"step5\":\"_2SvR7\",\"step4\":\"_3ZdKZ\",\"step3\":\"_23PDL\",\"step2\":\"_1cTFY\",\"step6\":\"k4G2s\",\"step1\":\"_25qox\"};","// import {\n//   ColorUnGroupdSelectedPoint,\n//   ColorUnGroupdUnSelectedPoint,\n// } from '../const';\n\nconst pointWidth = 34;\nconst pointHeight = 42;\n\n// const pointInWidth = 60;\n// const pointInHeight = pointInWidth;\n\ndeclare const BMap: any;\n\nexport class CustomPoint extends BMap.Overlay {\n  public data: any;\n  constructor({ type, data, onClick, onShowInfo, onHideInfo }) {\n    super();\n    this.type = type;\n    this.data = data;\n    this.point = new BMap.Point(data.longitude, data.latitude);\n    this.onClick = onClick;\n    this.onShowInfo = onShowInfo;\n    this.onHideInfo = onHideInfo;\n  }\n\n  initialize(map) {\n    this.map = map;\n    const div = document.createElement('div');\n    div.style.position = 'absolute';\n\n    div.style.width = '34px';\n    div.style.height = '42px';\n    div.style.cursor = 'pointer';\n    // loadType:0 装，1卸、2签到、3当时位置\n    if (this.type === 0) {\n      div.style.zIndex = '3';\n      div.innerHTML =\n        \"<img src='https://image.tf56.com/dfs/group1/M00/66/B4/CiFBCVujVEyARfifAAAHS3KgShs905.png'>\";\n    } else if (this.type === 1) {\n      div.style.zIndex = '1';\n      div.innerHTML =\n        \"<img src='https://image.tf56.com/dfs/group1/M00/66/B4/CiFBCVujVDKAaRbkAAAGsTheId8483.png'>\";\n    } else if (this.type === 2) {\n      div.style.zIndex = '1';\n      div.innerHTML =\n        \"<img src='https://image.tf56.com/dfs/group1/M00/66/B4/CiFBClujVFmAa-yDAAAG7-raXJk566.png'>\";\n    } else if (this.type === 3) {\n      div.style.zIndex = '1';\n      div.innerHTML =\n        \"<img src='https://image.tf56.com/dfs/group1/M00/66/B4/CiFBCVujU-KAN73xAAAH4eb8avA311.png'>\";\n    }\n    // div.appendChild(img);\n\n    div.onclick = e => {\n      if (this.onClick) {\n        this.onClick(this);\n      }\n    };\n\n    div.onmouseenter = () => {\n      if (this.onShowInfo) {\n        this.onShowInfo(this.data);\n      }\n    };\n\n    div.onmouseout = () => {\n      if (this.onHideInfo) {\n        this.onHideInfo(this.data);\n      }\n    };\n\n    this.map.getPanes().labelPane.appendChild(div);\n    this.div = div;\n\n    return div;\n  }\n\n  draw() {\n    const pixel = this.map.pointToOverlayPixel(this.point);\n    this.div.style.left = pixel.x - pointWidth / 2 + 'px';\n    this.div.style.top = pixel.y - pointHeight / 2 + 'px';\n  }\n\n  destroy() {\n    // this.map.getPanes().labelPane.remove(this.div);\n    this.div.onclick = null;\n    this.type = null;\n    this.data = null;\n    this.point = null;\n    this.onClick = null;\n    this.onShowInfo = null;\n    this.onHideInfo = null;\n\n    this.map = null;\n  }\n}\n","import styles from './infoWindow.module.less';\n\ndeclare const BMap: any;\n\nexport class InfoWindow extends BMap.Overlay {\n  constructor() {\n    super();\n    this.width = 280;\n    this.height = 114;\n  }\n\n  initialize(map) {\n    this.map = map;\n\n    this.div = document.createElement('div');\n    this.div.style.width = `${this.width}px`;\n    this.div.style.height = `${this.height}px`;\n    this.div.className = styles.divInfoWindow;\n\n    this.divCurrow = document.createElement('div');\n    this.divCurrow.className = styles.curr;\n\n    this.div.appendChild(this.divCurrow);\n\n    this.content = document.createElement('div');\n    this.content.className = styles.divf;\n    this.div.appendChild(this.content);\n\n    this.map.getPanes().labelPane.appendChild(this.div);\n\n    return this.div;\n  }\n\n  draw() {\n    const pixel = this.map.pointToOverlayPixel(this.point);\n    // this.div.style.left = pixel.x - this.width / 2 + 'px';\n    // this.div.style.top = pixel.y - this.height - 40 + 'px';\n    // const height = this.div.offsetHeight;\n\n    // 框位置\n    let fx = pixel.x - this.width / 2;\n    let fy = pixel.y - this.height - 31;\n\n    // 箭头位置\n    let cx = this.width / 2 - 11;\n    let cy = this.height - 5;\n\n    // 下面的做法，没有找到官方的做法，只能自己写\n    const posDiv = this.div.parentElement.parentElement.parentElement;\n    if (posDiv) {\n      const container = this.map.getContainer();\n      const mWidth = container.offsetWidth;\n      const mHeight = container.offsetHeight;\n\n      const mx = fx + posDiv.offsetLeft;\n      const mt = fy + posDiv.offsetTop;\n\n      if (mx < 0) {\n        // 如果左边距超出\n        fx = pixel.x - this.width / 2 - mx;\n        cx = cx + mx + 0;\n      } else if (mx + this.width > mWidth) {\n        // 如果右边距超出\n        fx = pixel.x - this.width / 2 - (this.width + mx - mWidth) - 0;\n        cx = cx + (this.width + mx - mWidth) + 3 + 1;\n      }\n      if (mt - 90 < 0) {\n        fy = pixel.y + 26;\n        cy = -12 + 2;\n        this.divCurrow.style.transform = 'rotate(45deg)';\n      } else {\n        cy -= 7;\n        this.divCurrow.style.transform = 'rotate(-45deg)';\n      }\n    }\n\n    this.div.style.left = fx + 'px';\n    this.div.style.top = fy + 'px';\n\n    this.divCurrow.style.left = cx + 'px';\n    this.divCurrow.style.top = cy + 'px';\n  }\n\n  setSize() {\n    this.div.style.width = this.width + 'px';\n    this.div.style.height = this.height + 'px';\n  }\n\n  show() {\n    super.show();\n    this.draw();\n    // this.setSize();\n  }\n\n  setPosition(point) {\n    this.point = point;\n  }\n\n  showValue(value) {\n    if (value === null || value === undefined || value === '') {\n      return '';\n    }\n    return value;\n  }\n\n  setData(data) {\n    let modetxt;\n    if (data.mode === '1') {\n      modetxt = 'GPS';\n    } else if (data.mode === '2') {\n      modetxt = '基站';\n    } else if (data.mode === '3') {\n      modetxt = 'WIFI';\n    }\n    const time = data.realtime.slice(0, 19);\n\n    this.content.innerHTML =\n      '<table><tr><th>当前位置：</th><td>' +\n      this.showValue(data.useextendcode) +\n      '</td></tr><tr><th>定位时间：</th><td>' +\n      this.showValue(time) +\n      '</td></tr><tr><th>速度：</th><td>' +\n      this.showValue(data.speed) +\n      'km/h</td></tr><tr><th>定位方式：</th><td>' +\n      this.showValue(modetxt) +\n      '</td></tr></table>';\n  }\n}\n","/**\n * DetailPage Component\n * @author yanwei\n * @date 2018-9-10 14:56:11\n */\nimport classnames from 'classnames';\nimport * as React from 'react';\n\nimport Button from 'antd/es/button';\nimport Select from 'antd/es/select';\n\nimport Col from 'antd/es/col';\nimport Row from 'antd/es/row';\nimport Switch from 'antd/es/switch';\n\nconst Option = Select.Option;\nimport styles from '../../index.module.less';\n\nexport interface IDetailPageProps {\n  data: any;\n  lbsPoints: any;\n  onChange: (value?: string, field?: string) => any;\n  handleChangeSwitch: (checked?: boolean) => any;\n  handlePause: () => any;\n  handlePlayback: () => any;\n}\ninterface IState {\n  mode: string;\n  loading: boolean;\n  filter: boolean;\n  speed: number;\n  topCollapse: boolean;\n  bottomCollapse: boolean;\n}\n\nclass DetailPage extends React.PureComponent<IDetailPageProps> {\n  state: IState;\n  // static defaultProps = {};\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      mode: '', // 坐标类型\n      filter: true, // 是否优化轨迹\n      speed: 3500, // 路书速度\n      topCollapse: true, // 收起\n      bottomCollapse: true,\n    };\n  }\n  toggleTopCollapse = () => {\n    this.setState({\n      topCollapse: !this.state.topCollapse,\n    });\n  };\n  toggleBottomCollapse = () => {\n    this.setState({\n      bottomCollapse: !this.state.bottomCollapse,\n    });\n  };\n  handleChangeFilter = value => {\n    this.props.onChange(value, 'filter');\n  };\n  handleChangeMode = value => {\n    this.props.onChange(value, 'mode');\n  };\n  handleChangeSpeed = value => {\n    this.props.onChange(value, 'speed');\n  };\n  renderWayList = () => {\n    const list = [];\n    const detail = this.props.data || {};\n    const data = detail.utmsTradeWayPoints || [];\n    const len = data.length;\n    if (len === 0) {\n      return;\n    }\n    for (let i = len - 1; i >= 0; i--) {\n      const li =\n        data[i].reachAddress || (data[i].reachLat && data[i].reachLng) ? (\n          <li\n            key={i}\n            className={data[i].loadType === 0 ? styles.step4 : styles.step5}\n          >\n            <p>{data[i].reachAddress || '----'}</p>\n            <p>{data[i].reachDate}</p>\n          </li>\n        ) : null;\n      list.push(li);\n    }\n    return list;\n  };\n  renderWaybillInfo = () => {\n    const { data } = this.props;\n    const { topCollapse } = this.state;\n    let statusTXT = '';\n    if (data.status) {\n      if (data.status === 0) {\n        statusTXT = '待调度';\n      } else if (data.status === 1) {\n        statusTXT = '待接单';\n      } else if (data.status === 2) {\n        statusTXT = '待签到';\n      } else if (data.status === 3) {\n        statusTXT = '待装货';\n      } else if (data.status === 4) {\n        statusTXT = '待卸货';\n      } else if (data.status === 5) {\n        statusTXT = '已完成';\n      } else if (data.status === 6) {\n        statusTXT = '已取消';\n      } else if (data.status === 7) {\n        statusTXT = '待改派';\n      }\n    }\n\n    return (\n      <div className={styles.waybillSidebar__orderInfo}>\n        <h3>\n          订单信息\n          <small>{statusTXT}</small>\n        </h3>\n        <h4>\n          <span>运单号: </span>\n          {data.tradeNumber}\n        </h4>\n        <p\n          className={classnames({\n            [styles.waybillSidebar__toggle]: true,\n            [styles.waybillSidebar__down]: !topCollapse,\n          })}\n          onClick={() => {\n            this.toggleTopCollapse();\n          }}\n        >\n          {topCollapse ? '展开' : '收起'}\n          <small />\n        </p>\n      </div>\n    );\n  };\n  renderUserInfo = () => {\n    const { data } = this.props;\n    return (\n      <div className={styles.waybillSidebar__userInfo}>\n        <div className={styles.waybillSidebar__userInfoL}>\n          <img\n            src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAXpQTFRFAAAA////4+Pj////5ubm////8PDw////4+Pj7Ozs9vb24+Pj7Ozs8fHx5eXl6Ojo8vLy4+Pj7Ozs7u7u8fHx5OTk6urq7Ozs7+/v8vLy5OTk6+vr8PDw8/Pz4uLi6urq7+/v8fHx8/Pz4uLi6+vr8/Pz4+Pj7+/v8PDw8vLy4+Pj7u7u8fHx4uLi8PDw8fHx4+Pj8PDw8fHx4uLi8vLy4+Pj8fHx8vLy4+Pj8PDw8fHx4+Pj8fHx4uLi8vLy4uLi8vLy4uLi4uPi4+Pj5OTk5OXk5eXl5ubm5+fn6Ojo6enp6erp6urq6+vr6+zr7Ozs7O3r7e3t7e7s7u7t7u7u7u/t7+/u7+/v7/Du8PDw8fHx8fLw8vLx8vLy8vPx8/Pz8/Ty9PTz9PT09PXz9fb09vb19vb29/f39/j1+Pj2+Pj3+Pj4+fn4+vr4+vr5+vr6+/v5+/v7/Pz6/Pz8/P36/f37/f38/f77/v78/v7+/v/8///9///+////IZRGWAAAAEF0Uk5TAAMJCQoKEREbGxs3NzdOTk5cXFxcYGBgYGBmZmZmfHx8fHyPj4+vr6+vt7e3y8vL29vb5ubs7Ozy8vL19ff3+fnGGasbAAACnElEQVRIx4VW+0MSQRBeBCnzEZRWmmhhWBiGAYr5QJajQwiyMwpYNItM7UFRaOAa/3sHB3czezy+H3e+b2dvd+abI0SE1eHxBcLRaDjg8zisZADs97xbDGDLO32tD3344QYzYcM93INumQ2xrgi5LN34I37WE/4bZv4Y2L6gZDLpZDKlFPQk4yL/dkSnZxO0AyndWYxMYv4tY/sMhUjo60gxZuyvUIykngOcagScPy4IaFb/Dv3LLc8M/p568B4pmL9zu/fBBe5SUwr9qphL49vge0mSlH8Va1Nf5o/TknEmFtLefB7wC1TOc147K757s18845yfU5oxwu5Wvb0AghylHzmCZLyFWlfNSrwDayBL6QcsiMkpEJ9WBY8ZzlDEAiqDIzGv2i+o/tlbCQtqNPsJ9oeV3ET8Cn+NBeexGv8GCA7yCAnq/PgzPtI+5xVA8JCnSHDBRdQ4/wEIPvIcCUp1k4JfHAJCgKzh3iqV/2D615+Qz8IkKrbje8SvZHE0ahYoKMUBEwVrpo4/APyyGAwLH91CWefXj8RYQLjWFg71y/1iivmEh9Pw/apFv/prDnmE0tBw2vjXRKNqDjnE4tMyNDSYBWrxkSd4Kbd3Ur1sCy6rv5VsgeHyJneBQ6YTqmWUGgaqamfLKQU1kF2z+FxS7hgREBy1LXM3ldNblDxo8Q03igNBEhuaWxsjTZtJAyNiOv8EG1rbZsisKkhC6zpt83/FsS27OlbpbzoeMrsWv4RMMG5YZdOME9gepbSSkYWlEBhD4xGZDsI2GkKT8YECJx5Bzu0B+zvFITca7McPjnYZu8u9+cvXuw72mR5JgjOWHv8Ctrl1M319ztbv52RqcROyNxen7IN+aIYmFpZWVnd2VleWFiaGTOH/F+9koN3+ab4AAAAASUVORK5CYII=\"\n            alt=\"\"\n          />\n        </div>\n        <div className={styles.waybillSidebar__userInfoR}>\n          <h4>\n            <span className={styles.waybillSidebar__userInfoName}>\n              {data.driverName}\n            </span>\n            {data.driverMobilenumber}\n          </h4>\n          <h4>\n            {data.driverCarStruct}\n            <span className={styles.waybillSidebar__userInfoLine} />\n            {data.driverCarplatenumber}\n          </h4>\n        </div>\n      </div>\n    );\n  };\n  renderTrack = () => {\n    const { data, lbsPoints } = this.props;\n    return (\n      <div className={styles.waybillSidebar__orderBox}>\n        <h3>在途跟踪</h3>\n        <p>\n          <span>实际运输距离: </span>\n          {data.actualDistance}\n        </p>\n        <p>\n          <span>轨迹点数: </span>\n          {lbsPoints}\n        </p>\n        <ul>\n          {data.finishDate !== null && data.finishDate ? (\n            <li className={styles.step6}>\n              <p>\n                <span>订单完成时间：</span>\n                {data.finishDate}\n              </p>\n            </li>\n          ) : null}\n\n          {this.renderWayList()}\n\n          {data.signDate !== null ? (\n            <li className={styles.step3}>\n              <p>\n                <span>司机签到时间：</span>\n                {data.signDate}\n              </p>\n            </li>\n          ) : null}\n\n          {data.receiveDate !== null ? (\n            <li className={styles.step2}>\n              <p>\n                <span>司机接单时间：</span>\n                {data.receiveDate}\n              </p>\n            </li>\n          ) : null}\n\n          <li className={styles.step1}>\n            <p>\n              <span>订单发布时间：</span>\n              {data.createDate}\n            </p>\n          </li>\n        </ul>\n      </div>\n    );\n  };\n  handleChangeSwitch = checked => {\n    this.setState({\n      loading: true,\n    });\n    this.props.handleChangeSwitch(checked);\n    setTimeout(() => {\n      this.setState({\n        loading: false,\n      });\n    }, 500);\n  };\n  renderPathPlanning = () => {\n    const { loading } = this.state;\n    const { data } = this.props;\n    const utmsTradeWayPoints = data.utmsTradeWayPoints || [];\n    let tjnum = 0;\n\n    return (\n      <div className={styles.waybillSidebar__orderBox}>\n        <h3>\n          订单路径规划\n          {utmsTradeWayPoints.length ? (\n            <div className={styles.waybillSidebar__Switch}>\n              <Switch\n                loading={loading}\n                checkedChildren=\"开\"\n                unCheckedChildren=\"关\"\n                defaultChecked\n                onChange={this.handleChangeSwitch}\n              />\n            </div>\n          ) : null}\n        </h3>\n        <p>\n          <span>预计运输距离: </span>\n          {data.preDistance || '--'}\n          千米\n        </p>\n        <p>\n          <span>装卸点: </span>\n          {data.wayPointNum || '--'}个\n        </p>\n        {utmsTradeWayPoints.map((d, i) => {\n          if (d.loadType === 1) {\n            tjnum++;\n          }\n          return (\n            <p key={i}>\n              <span>\n                {d.loadType === 0\n                  ? '装货地址:'\n                  : i === utmsTradeWayPoints.length - 1\n                    ? '卸货地址:'\n                    : `途经点${tjnum}:`}\n              </span>\n              {d.address}\n            </p>\n          );\n        })}\n      </div>\n    );\n  };\n  renderPlayback = () => {\n    const { bottomCollapse } = this.state;\n    return (\n      <div className={styles.waybillSidebar__bottomBox}>\n        <p\n          className={classnames({\n            [styles.waybillSidebar__toggle]: true,\n            [styles.waybillSidebar__down]: !bottomCollapse,\n          })}\n          onClick={() => {\n            this.toggleBottomCollapse();\n          }}\n        >\n          {bottomCollapse ? '展开' : '收起'}\n          <small />\n        </p>\n        {!bottomCollapse ? (\n          <div className={styles.waybillSidebar__orderBox}>\n            <h3>播放轨迹</h3>\n            <div>\n              <Row>\n                <Col span={6}>轨迹类型:</Col>\n                <Col span={18}>\n                  <Select\n                    style={{ width: '100%' }}\n                    defaultValue=\"true\"\n                    onChange={this.handleChangeFilter}\n                  >\n                    <Option value=\"true\">优化轨迹</Option>\n                    <Option value=\"false\">原始轨迹</Option>\n                  </Select>\n                </Col>\n              </Row>\n              <Row>\n                <Col span={6}>坐标类型:</Col>\n                <Col span={18}>\n                  <Select\n                    style={{ width: '100%' }}\n                    defaultValue=\"\"\n                    onChange={this.handleChangeMode}\n                  >\n                    <Option value=\"\">全部</Option>\n                    <Option value=\"GPS\">GPS</Option>\n                    <Option value=\"GSM\">基站</Option>\n                    <Option value=\"WIFI\">Wi-Fi</Option>\n                  </Select>\n                </Col>\n              </Row>\n              <Row>\n                <Col span={6}>速度:</Col>\n                <Col span={18}>\n                  <Select\n                    style={{ width: '100%' }}\n                    defaultValue=\"3500\"\n                    onChange={this.handleChangeSpeed}\n                  >\n                    <Option value=\"3500\">非常快(3500m/s)</Option>\n                    <Option value=\"3000\">很快(3000m/s)</Option>\n                    <Option value=\"2500\">比较快(2500m/s)</Option>\n                    <Option value=\"2000\">一般(2000m/s)</Option>\n                    <Option value=\"1500\">慢速(1500m/s)</Option>\n                    <Option value=\"1000\">很慢(1000m/s)</Option>\n                    <Option value=\"500\">非常慢(500m/s)</Option>\n                  </Select>\n                </Col>\n              </Row>\n              <Row gutter={10}>\n                <Col span={12}>\n                  <Button onClick={this.props.handlePause}>暂停</Button>\n                </Col>\n                <Col span={12}>\n                  <Button type=\"primary\" onClick={this.props.handlePlayback}>\n                    播放轨迹\n                  </Button>\n                </Col>\n              </Row>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  };\n\n  public render() {\n    const { topCollapse } = this.state;\n    return (\n      <div className={styles.waybillSidebar}>\n        <h2>订单跟踪</h2>\n        <div className={styles.waybillSidebar__sidebar}>\n          <div className={styles.waybillSidebar__content}>\n            {/* 用户信息 */}\n            {this.renderUserInfo()}\n            {/* 订单信息 */}\n            {this.renderWaybillInfo()}\n            {/* 订单路径 */}\n            {!topCollapse ? this.renderPathPlanning() : null}\n            {/* 在途跟踪 */}\n            {this.renderTrack()}\n            {/* 播放轨迹 */}\n            {this.renderPlayback()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default DetailPage;\n","/**\n * WaybillMap Component\n * @author yanwei\n * @date 2018-9-13 14:23:17\n */\n\nimport moment from 'moment';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { createStructuredSelector } from 'reselect';\nimport shallowequal from 'shallowequal';\nimport { CustomPoint } from './ctrls/customPoint';\nimport { InfoWindow } from './ctrls/infoWindow';\n\nimport message from 'antd/es/message';\nimport Spin from 'antd/es/spin';\n\nimport {\n  makeSelectData,\n  makeSelectError,\n  makeSelectlbsPoints,\n  makeSelectlbsSource,\n  makeSelectLoading,\n} from './selectors';\n\nimport styles from './index.module.less';\n\nimport DetailPage from './components/DetailPage/index';\n\ndeclare const BMap: any;\ndeclare const BMapLib: any;\n\nexport interface IWaybillMapProps {\n  data: any;\n  lbsSource: any;\n  lbsPoints: any;\n  children: React.ReactChildren;\n  searchParams: {\n    tradeNumber: string;\n  };\n  selectTradeTrack: (params?: object) => any;\n  selectLbsTrack: (params?: object) => any;\n}\ninterface IState {\n  loading: boolean;\n  data: object;\n  lbsSource: object;\n  // lbsPoints: number;\n  checked: boolean;\n  mode: string;\n  filter: boolean;\n  speed: number;\n  lbsMarkers: object;\n}\nclass WaybillMap extends React.PureComponent<IWaybillMapProps> {\n  state: IState;\n  private divMap: HTMLDivElement;\n  private infoWindow: InfoWindow;\n  private map: any;\n  private lushu: object;\n  private lbsPolyline: any;\n  private locationCP: any;\n  private driving: any;\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      data: {},\n      lbsSource: [],\n      checked: false,\n      mode: '', // 坐标类型\n      filter: true, // 是否优化轨迹\n      speed: 3500, // 路书速度\n      lbsMarkers: [], // 实际行驶轨迹点\n    };\n  }\n  public componentDidMount() {\n    this.initMap();\n    const { selectTradeTrack, searchParams } = this.props;\n    selectTradeTrack(\n      Object.assign(searchParams, {\n        coordinateType: 'BD09',\n      }),\n    );\n  }\n  initMap() {\n    // 创建Map实例\n    this.map = new BMap.Map(this.divMap, {\n      minZoom: 1,\n      maxZoom: 19,\n      enableMapClick: false,\n    });\n\n    this.map.enableScrollWheelZoom(true); // 开启鼠标滚轮缩放\n    // 去掉地图左下解的LOGO与文字\n    this.map.addEventListener('tilesloaded', () => {\n      this.removeMapElement(document.querySelector('.anchorBL'));\n      this.removeMapElement(document.querySelector('.BMap_cpyCtrl'));\n    });\n\n    this.map.centerAndZoom('杭州', 12);\n  }\n  componentWillReceiveProps(nextProps) {\n    // 移除旧的轨迹\n    // if (\n    //   shallowequal(this.state.data, nextProps.data) ||\n    //   this.state.lbsSource === nextProps.lbsSource\n    // ) {\n    //   return;\n    // }\n\n    if (!shallowequal(this.state.data, nextProps.data)) {\n      this.setState(\n        {\n          data: nextProps.data || {},\n        },\n        () => {\n          // 规划装卸签到点\n          this.initPlanMarkers();\n          // 实际装卸签到点\n          this.initReachMarkers();\n        },\n      );\n    }\n    if (this.state.lbsSource !== nextProps.lbsSource) {\n      this.setState(\n        {\n          lbsSource: nextProps.lbsSource || [],\n          loading: true,\n        },\n        () => {\n          if (this.map && this.locationCP) {\n            this.map.removeOverlay(this.locationCP);\n          }\n          if (this.map && this.lbsPolyline) {\n            this.map.removeOverlay(this.lbsPolyline);\n          }\n          if (this.lushu && this.lushu._marker) {\n            // this.map.removeOverlay(this.lushu);\n            this.map.removeOverlay(this.lushu._marker);\n          }\n          setTimeout(() => {\n            // // 实际当前位置点\n            this.locationMarker();\n            // // 实际行驶轨迹点\n            this.initLbsPolyline();\n          }, 100);\n          setTimeout(() => {\n            this.setState({\n              loading: false,\n            });\n          }, 200);\n        },\n      );\n    }\n  }\n  removeMapElement = (element: Element) => {\n    if (element) {\n      element.parentElement.removeChild(element);\n    }\n  };\n  /**\n   * 请求lbs轨迹点\n   */\n  selectLbsTrack() {\n    const { mode, filter } = this.state;\n    const { data } = this.props;\n    const list = data.utmsTradeWayPoints;\n    const params = {\n      partyId: data.driverId || '', // 手机号\n      mode,\n      filter,\n      returnFilterData: true,\n      datestart: data.signDate\n        ? data.signDate\n        : moment().format('YYYY-MM-DD HH:mm:ss'),\n      dateend:\n        list.length && list[list.length - 1].reachDate\n          ? list[list.length - 1].reachDate\n          : moment().format('YYYY-MM-DD HH:mm:ss'),\n      format: 'BD09',\n      collectType: 2,\n    };\n    this.props.selectLbsTrack(params);\n  }\n  /**\n   * 表单\n   */\n  handleInputChange = (value, field) => {\n    if (field === 'filter') {\n      this.setState(\n        {\n          filter: value,\n        },\n        () => {\n          this.selectLbsTrack();\n        },\n      );\n    } else if (field === 'mode') {\n      this.setState(\n        {\n          mode: value,\n        },\n        () => {\n          this.selectLbsTrack();\n        },\n      );\n    } else if (field === 'speed') {\n      this.setState({\n        speed: value,\n      });\n    }\n  };\n\n  /**\n   * 开关\n   */\n  handleChangeSwitch = checked => {\n    this.setState({\n      loading: true,\n    });\n\n    if (!checked) {\n      this.map.clearOverlays();\n    } else {\n      // 规划装卸签到点\n      this.initPlanMarkers();\n    }\n    setTimeout(() => {\n      // 实际装卸签到点\n      this.initReachMarkers();\n      // 实际当前位置点\n      this.locationMarker();\n      // 实际行驶轨迹点\n      this.initLbsPolyline();\n    }, 300);\n\n    setTimeout(() => {\n      this.setState({\n        loading: false,\n      });\n    }, 500);\n  };\n\n  /**\n   * 暂停\n   */\n  handlePause = () => {\n    // if (!Array.prototype.isPrototypeOf(this.lushu)) {\n    //   return;\n    // }\n    if (!this.lushu._opts) {\n      message.error('没有轨迹');\n      return;\n    }\n    this.lushu.stop();\n  };\n  /**\n   * 播放轨迹\n   */\n  handlePlayback = () => {\n    if (!this.lushu._opts) {\n      message.error('没有轨迹');\n      return;\n    }\n    const { speed, lbsMarkers } = this.state;\n    const pts = lbsMarkers;\n    this.map.setViewport(pts, {\n      margins: [0, 300, 0, 0],\n    });\n    this.lushu._opts.speed = speed;\n    this.lushu.stop();\n    this.lushu.start();\n  };\n\n  /**\n   * 实际的装卸点\n   */\n  initReachMarkers() {\n    const { data } = this.props;\n    // 实际签到的点\n    const lng = data.signLongitude;\n    const lat = data.signLatitude;\n    if (lng && lat) {\n      const cp = new CustomPoint({\n        type: 2,\n        data: { longitude: lng, latitude: lat },\n        onClick: null,\n        onShowInfo: null,\n        onHideInfo: null,\n      });\n      this.map.addOverlay(cp);\n    }\n\n    // 实际装卸的点\n    if (!data.utmsTradeWayPoints || data.utmsTradeWayPoints.length === 0) {\n      return;\n    }\n    data.utmsTradeWayPoints.map(d => {\n      const cp = new CustomPoint({\n        type: d.loadType === 1 ? 1 : 0,\n        data: {\n          longitude: d.reachLng,\n          latitude: d.reachLat,\n        },\n        onClick: null,\n        onShowInfo: null,\n        onHideInfo: null,\n      });\n      this.map.addOverlay(cp);\n    });\n  }\n  /**\n   * 创建标注\n   */\n  initMarker(options) {\n    const { lng, lat, url } = options;\n    const pt = new BMap.Point(lng, lat);\n    const icon = new BMap.Icon(url, new BMap.Size(34, 42));\n    const marker = new BMap.Marker(pt, { icon }); // 创建标注\n    return marker;\n  }\n  /**\n   * 规划的装卸点驾车路径\n   */\n  initPlanMarkers() {\n    const { data } = this.props;\n    const list = data.utmsTradeWayPoints;\n    if (!list) {\n      return;\n    }\n    let p1;\n    // let p2;\n    const p3 = [];\n    let p = 0;\n    list.map((d, i) => {\n      if (i === 0) {\n        p1 = new BMap.Point(d.longitude, d.latitude);\n      } else {\n        if (d.longitude && d.latitude) {\n          const pt = new BMap.Point(d.longitude, d.latitude);\n          p3[p] = pt;\n          p++;\n        }\n      }\n    });\n    const p2 = p3[p3.length - 1];\n    p3.pop();\n    this.driving = new BMap.DrivingRoute(this.map, {\n      renderOptions: { map: this.map, autoViewport: true },\n      policy: 'BMAP_DRIVING_POLICY_LEAST_DISTANCE',\n    });\n    this.driving.search(p1, p2, { waypoints: p3 }); // waypoints表示途经点\n  }\n  onShowInfo = data => {\n    if (!this.infoWindow) {\n      this.infoWindow = new InfoWindow();\n      this.infoWindow.setPosition(\n        new BMap.Point(data.longitude, data.latitude),\n      );\n      this.map.addOverlay(this.infoWindow);\n    } else {\n      this.infoWindow.setPosition(\n        new BMap.Point(data.longitude, data.latitude),\n      );\n    }\n    this.infoWindow.setData(data);\n    this.infoWindow.show();\n  };\n  onHideInfo = () => {\n    this.infoWindow.hide();\n  };\n  onCPClick = (cpoint: CustomPoint) => {};\n  locationMarker() {\n    // loadType:0 装，1卸、2签到、3当时位置\n    const { lbsSource } = this.props;\n    const l = lbsSource.length - 1;\n    const data = lbsSource[l];\n    if (lbsSource.length) {\n      this.locationCP = new CustomPoint({\n        type: 3,\n        data,\n        onClick: this.onCPClick,\n        onShowInfo: this.onShowInfo,\n        onHideInfo: this.onHideInfo,\n      });\n      this.map.addOverlay(this.locationCP);\n    }\n  }\n  /**\n   * 实际的驾车路径\n   */\n  initLbsPolyline() {\n    const { lbsSource } = this.props;\n\n    this.lushu = new Object();\n\n    if (lbsSource.length === 0) {\n      return;\n    }\n    const pts = [];\n    lbsSource.map((d, i) => {\n      // const p = new BMap.Point(d.longitude, d.latitude);\n      pts[i] = new BMap.Point(d.longitude, d.latitude);\n    });\n    this.lbsPolyline = new BMap.Polyline(pts, {\n      strokeColor: '#FF8000',\n      strokeWeight: 3,\n      strokeOpacity: 1,\n    }); // 创建折线\n    this.map.addOverlay(this.lbsPolyline); // 增加折线\n    this.setState({\n      lbsMarkers: pts,\n    });\n\n    // this.map.setViewport(pts);\n    this.lushu = new BMapLib.LuShu(this.map, pts, {\n      defaultContent: '',\n      autoView: true,\n      icon: new BMap.Icon(\n        'http://lbsyun.baidu.com/jsdemo/img/car.png',\n        new BMap.Size(52, 26),\n        { anchor: new BMap.Size(27, 13) },\n      ),\n      speed: this.state.speed,\n      enableRotation: true,\n      landmarkPois: [],\n    });\n  }\n\n  public render() {\n    const { data, lbsPoints } = this.props;\n    return (\n      <div className={styles.WaybillMap}>\n        <Spin spinning={this.state.loading}>\n          <div\n            className={styles.WaybillMap__box}\n            ref={node => (this.divMap = node)}\n          />\n        </Spin>\n        <DetailPage\n          data={data}\n          lbsPoints={lbsPoints}\n          onChange={(value, field) => {\n            this.handleInputChange(value, field);\n          }}\n          handlePause={() => {\n            this.handlePause();\n          }}\n          handlePlayback={() => {\n            this.handlePlayback();\n          }}\n          handleChangeSwitch={checked => {\n            this.handleChangeSwitch(checked);\n          }}\n          // checked={this.state.checked}\n        />\n      </div>\n    );\n  }\n}\n// const WaybillMap = Form.create()(WaybillMap);\n\nexport default ({ routeId, actions }) => {\n  const mapDispatchToProps = dispatch => ({\n    selectTradeTrack: params => dispatch(actions.selectTradeTrack(params)),\n    selectLbsTrack: params => dispatch(actions.selectLbsTrack(params)),\n  });\n\n  const selectState = state => state.get(routeId);\n  const mapStateToProps = createStructuredSelector({\n    data: makeSelectData(selectState),\n    lbsSource: makeSelectlbsSource(selectState),\n    lbsPoints: makeSelectlbsPoints(selectState),\n    error: makeSelectError(selectState),\n    loading: makeSelectLoading(selectState),\n  });\n\n  const withConnect = connect(\n    mapStateToProps,\n    mapDispatchToProps,\n  );\n\n  return compose(withConnect)(WaybillMap);\n};\n","/**\n * WaybillMap selectors\n * @author yanwei\n * @date 2018-9-13 14:23:17\n */\nimport { createSelector } from 'reselect';\n\nexport const makeSelectError = selectState =>\n  createSelector(selectState, state => state.get('error'));\n\nexport const makeSelectLoading = selectState =>\n  createSelector(selectState, state => state.get('loading'));\n\nexport const makeSelectData = selectState =>\n  createSelector(selectState, state => state.get('data'));\n\nexport const makeSelectlbsSource = selectState =>\n  createSelector(selectState, state => state.get('lbsSource'));\n\nexport const makeSelectlbsPoints = selectState =>\n  createSelector(selectState, state => state.get('lbsPoints'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divInfoWindow\":\"_26UA0\",\"divf\":\"R_jUN\",\"curr\":\"xA2jk\"};"],"sourceRoot":""}