(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"9ky0":function(e,t,a){e.exports={waybillContainer:"_38IjW",detailBox:"_2OhXv",detailBoxHide:"_1yvvA",memu:"_3ejHb",memuUP:"_16vYL",memuDOWN:"qCnDR",blockBox:"_1e93C",blockTag:"_2JnA8",label:"_1z9Qi",span:"_3elMZ",show:"_1xzEa",hide:"_2VPeZ",active:"_3EzfT",searchCondition:"_2Jakn"}},"L/Qa":function(e,t){e.exports="data:image/png;base64,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"},U5CS:function(e,t,a){e.exports={vehicleContainer:"goAFk",detailBox:"_2tlRp",detailBoxHide:"_1ggnL",carModelCar:"ahio9",memu:"_3yq_C",memuUP:"_5-KG9",memuDOWN:"_2vAUF",blockBox:"_2i1Lf",blockTag:"_2jbLs",label:"_2YRIk",span:"_2vVNi",active:"_2zfRQ",searchCondition:"_37Y0S"}},V2dt:function(e,t){e.exports="data:image/png;base64,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"},XoLn:function(e,t,a){e.exports={TransportDispatch:"_2wVOu"}},qfZF:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),i=a("peh1"),o=a("i8i4"),l=a.n(o),s=a("ytNb"),c=a.n(s),u=a("Vl3Y"),p=a("5rEg"),m=a("2fM7"),d=a("tsqr"),f=a("bx4M"),b=a("2/Rp"),y=a("VXEj"),h=a("BMrR"),v=a("kPKH"),g=a("NUBc"),E=a("gD9s"),S=a("kLXV"),w=a("Tckk"),C=a("lMyb"),A=a("qTAg");function k(e){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function O(e,t,a,n,r,i,o){try{var l=e[i](o),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,r)}function N(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return!t||"object"!==k(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=u.a.Item,B=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=D(this,(e=W(t)).call.apply(e,[this].concat(r)))).state={data:{}},a}var a,i,o,l,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,n["PureComponent"]),a=t,(i=[{key:"componentWillReceiveProps",value:(l=regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.visible||this.props.visible){e.next=3;break}return e.next=3,Object(A.a)({utmsDriverId:t.utmsDriverId}).then(function(e){a.setState({data:e.data})});case 3:case"end":return e.stop()}},e,this)}),s=function(){var e=this,t=arguments;return new Promise(function(a,n){var r=l.apply(e,t);function i(e){O(r,a,n,i,o,"next",e)}function o(e){O(r,a,n,i,o,"throw",e)}i(void 0)})},function(e){return s.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,i=t.onCreate,o={labelCol:{span:6},wrapperCol:{span:15}};return r.a.createElement(S.a,{visible:a,onOk:i,onCancel:function(){e.setState({data:{}}),n()}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(w.a,{size:64,icon:"user",src:this.state.data.profilePicture||C.a.emptyRecord}),r.a.createElement("h1",{style:{margin:"10px 0 0 0"}},this.state.data.driverName||C.a.emptyRecord),r.a.createElement("p",null,this.state.data.phoneNumber||C.a.emptyRecord)),r.a.createElement(u.a,{layout:"horizontal"},r.a.createElement(j,M({},o,{label:"\u8f66\u8f86\u7c7b\u578b"}),this.state.data.vehicleLong?this.state.data.vehicleLong/1e3+"\u7c73"+this.state.data.vehicleType:C.a.emptyRecord),r.a.createElement(j,M({},o,{label:"\u7ed1\u5b9a\u8f66\u8f86"}),this.state.data.plateNumber||C.a.emptyRecord),r.a.createElement(j,M({},o,{label:"\u9a7e\u7167\u7c7b\u578b"}),this.state.data.driverLicenseType||C.a.emptyRecord),r.a.createElement(j,M({},o,{label:"\u5e74\u9f84"}),this.state.data.age||C.a.emptyRecord),r.a.createElement(j,M({},o,{label:"\u9a7e\u9f84"}),this.state.data.drivingAge||C.a.emptyRecord)))}}])&&N(a.prototype,i),o&&N(a,o),t}(),P=a("+KLJ"),V=a("fyUT"),T=a("NQij");function R(e){return(R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return!t||"object"!==R(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J,Y=u.a.Item,U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,q(t).apply(this,arguments))}var a,i,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,n["PureComponent"]),a=t,(i=[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,i=e.form,o=e.confirmLoading,l=(e.formContent,e.title),s=e.errCode,c=i.getFieldDecorator,m={labelCol:{span:6},wrapperCol:{span:15}};return r.a.createElement(S.a,{centered:!0,maskClosable:!1,title:l,visible:t,confirmLoading:o,onOk:n,onCancel:function(){i.resetFields(),a()}},this.props.status>1?r.a.createElement(P.a,{message:"\u8be5\u53f8\u673a\u672a\u7ed1\u5b9a\u8f66\u8f86\u4fe1\u606f\uff0c\u8bf7\u8865\u5145\u8f66\u8f86\u4fe1\u606f",type:"info",showIcon:!0,className:"mb10"}):"",r.a.createElement(u.a,{layout:"horizontal"},r.a.createElement(Y,L({},m,{label:"\u53f8\u673a\u53f7\u7801"}),c("driverMobilenumber",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53f8\u673a\u624b\u673a\u53f7\u7801!"},{pattern:T.b,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8054\u7cfb\u65b9\u5f0f"}]})(r.a.createElement(p.a,{maxLength:"20",disabled:this.props.selectVehicle.utmsDriverId&&"\u5feb\u6377\u6d3e\u5355"!==l}))),r.a.createElement(Y,L({},m,{label:"\u8fd0\u4ef7"}),c("driverIncome",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fd0\u4ef7!"}]})(r.a.createElement(V.a,{maxLength:"9",precision:2,step:.01,min:0,style:{width:295}}))),2===this.props.status||3===this.props.status?r.a.createElement(Y,L({},m,{label:"\u8f66\u724c\u53f7\u7801"}),c("driverCarplatenumber",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8f66\u724c\u53f7\u7801!"}]})(r.a.createElement(p.a,{maxLength:"10",disabled:3===this.props.status&&s&&"UTMS0020301003"===s}))):"",3===this.props.status?r.a.createElement(Y,L({},m,{label:"\u8f66\u8f86\u7c7b\u578b"}),c("carModelCarLong",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8f66\u8f86\u7c7b\u578b!"}]})(r.a.createElement(E.a,{maxSelect:1,noHot:!0}))):""))}}])&&z(a.prototype,i),o&&z(a,o),t}(),Z=u.a.create()(U),Q=a("U5CS"),G=a.n(Q);function X(e){return(X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function K(e,t,a,n,r,i,o){try{var l=e[i](o),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,r)}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return!t||"object"!==X(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae,ne=u.a.Item,re=(p.a.Search,m.a.Option,u.a.create()(J=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=$(this,ee(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.setState({current:1},a.seve)},a.seve=function(){var e=a.props.form.getFieldsValue(),t={searchInfo:e.searchInfo};e.carModelCarLong&&e.carModelCarLong.length>0&&(t.vehicleType=e.carModelCarLong?e.carModelCarLong[0].vehicleType:"",t.vehicleLong=e.carModelCarLong?e.carModelCarLong[0].vehicleLong:""),a.props.getAsyncVehiclelist(Object.assign({longitude:a.state.selectWaybill.tradeNumber&&a.state.selectWaybill.utmsTradeWayPoints[0]?a.state.selectWaybill.utmsTradeWayPoints[0].longitude:120.209761,latitude:a.state.selectWaybill.tradeNumber&&a.state.selectWaybill.utmsTradeWayPoints[0]?a.state.selectWaybill.utmsTradeWayPoints[0].latitude:30.255578,sortRule:a.state.selectWaybill.tradeNumber?2:1,skipCount:(a.state.current-1)*a.state.pageSize,pageSize:a.state.pageSize,enterCoordinateType:"BD09",outputCoordinateType:"BD09"},t)),a.setState({selectVehicle:{}},function(){a.props.transfer({});var e=a.state.listData.map(function(e){return e.active=!1,e});a.setState({listData:e})})},a.handleReset=function(){a.props.form.resetFields(),a.setState({current:1,selectVehicle:{}},function(){a.seve()})},a.handleOk=function(){var e=a.state,t=e.selectVehicle,n=e.selectWaybill,r=e.shortcutStatus,i=a.formRef.props.form;i.validateFields(function(){var e,o=(e=regeneratorRuntime.mark(function e(o,l){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return s={},s=t.utmsDriverId?{step:r,phoneNumber:t.phoneNumber,freight:l.driverIncome,tradeNumber:n.tradeNumber}:{step:r,phoneNumber:l.driverMobilenumber,freight:l.driverIncome,tradeNumber:n.tradeNumber},2!==r&&3!==r||(s.plateNumber=l.driverCarplatenumber),3===r&&(s.vehicleType=l.carModelCarLong[0].vehicleType,s.vehicleLong=l.carModelCarLong[0].vehicleLong),a.setState({shortcut:{confirmLoading:!0}}),e.next=9,Object(A.d)(s).then(function(e){d.a.success(0===n.status?"\u6d3e\u5355\u6210\u529f":"\u6539\u6d3e\u6210\u529f"),a.setState({shortcut:{visible:!1,confirmLoading:!1}},function(){i.resetFields(),a.props.initFn()})},function(e){a.setState({shortcut:{visible:!0,confirmLoading:!1}}),e.code?("UTMS0020301001"===e.code&&a.setState({shortcutStatus:2}),"UTMS0020301002"===e.code&&a.setState({shortcutStatus:3}),"UTMS0020301003"===e.code&&a.setState({shortcutStatus:3,errCode:e.code},function(){i.setFieldsValue({driverCarplatenumber:e.data.plateNumber})})):d.a.error(0===n.status?"\u6d3e\u5355\u5931\u8d25 "+e.msg:"\u6539\u6d3e\u5931\u8d25 "+e.msg)});case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,a=arguments;return new Promise(function(n,r){var i=e.apply(t,a);function o(e){K(i,n,r,o,l,"next",e)}function l(e){K(i,n,r,o,l,"throw",e)}o(void 0)})});return function(e,t){return o.apply(this,arguments)}}())},a.handleCancel=function(){a.setState({shortcut:{visible:!1}})},a.saveFormRef=function(e){a.formRef=e},a.toggleTopCollapse=function(){a.setState({vehicleStatus:!a.state.vehicleStatus})},a.selectActive=function(e,t){e.active||a.setState({selectVehicle:e},function(){var n=a.state.listData.map(function(e,a){return e.active=t===a,e});a.setState({listData:n}),a.props.transfer(e)})},a.sendOrders=function(e,t){if(a.state.selectWaybill.tradeNumber){var n=a.formRef.props.form;1===t&&a.setState({shortcut:{visible:!0,title:"\u5feb\u6377\u6d3e\u5355"},shortcutStatus:1},n.setFieldsValue({driverIncome:a.state.selectWaybill.cost})),2===t&&a.setState({shortcut:{visible:!0,title:"\u6d3e\u5355"},shortcutStatus:1},n.setFieldsValue({driverIncome:a.state.selectWaybill.cost,driverMobilenumber:e.phoneNumber})),3===t&&a.setState({shortcut:{visible:!0,title:"\u6539\u6d3e"},shortcutStatus:1},n.setFieldsValue({driverIncome:a.state.selectWaybill.cost,driverMobilenumber:e.phoneNumber}))}else d.a.error("\u8bf7\u5148\u9009\u62e9\u8d27\u6e90")},a.state={listData:[],vehicleStatus:!1,shortcutVisible:!1,shortcut:{visible:!1,confirmLoading:!1,title:"\u5feb\u6377\u6d3e\u5355"},shortcutStatus:1,detail:{visible:!1},selectVehicle:e.selectVehicle,selectWaybill:{utmsTradeWayPoints:[]},current:1,pageSize:10},a}var a,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,n["PureComponent"]),a=t,(r=[{key:"componentWillReceiveProps",value:function(e){var t=this;e.vehicleData.equals(this.props.vehicleData)||this.setState({listData:e.vehicleData.toJS()},function(){t.selectActive(e.selectVehicle,e.selectVehicle.index)}),e.selectWaybill&&e.selectWaybill.tradeNumber!==this.props.selectWaybill.tradeNumber&&this.setState({selectWaybill:e.selectWaybill},function(){t.props.form.setFieldsValue({carModelCarLong:[{value:e.selectWaybill.fromCarLong/1e3+"\u7c73"+e.selectWaybill.fromCarStruct}]}),setTimeout(t.seve,100)}),e.selectVehicle.index!==this.props.selectVehicle.index&&this.selectActive(e.selectVehicle,e.selectVehicle.index)}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,r=(t.setFieldsValue,this.props),i=(r.vehicleData,r.vehicleLoading),o=(r.vehicleDataCount,{labelCol:{span:7},wrapperCol:{span:16}});return n.createElement("div",{className:G.a.vehicleContainer},n.createElement(f.a,{type:"inner",title:"\u8fd0\u529b\u5217\u8868",className:[G.a.detailBox,this.state.vehicleStatus?G.a.detailBoxHide:""].join(" "),bodyStyle:{paddingLeft:10,paddingRight:10},extra:n.createElement("a",{href:"javascript:;",onClick:this.toggleTopCollapse.bind(this,1)},n.createElement("i",{className:G.a.memu+" "+(this.state.vehicleStatus?G.a.memuUP:G.a.memuDOWN)}))},n.createElement("div",{style:{borderBottom:"1px solid #E4E7EF",marginBottom:5}},n.createElement(u.a,{className:G.a.searchCondition,onSubmit:this.handleSubmit,style:{marginBottom:16}},n.createElement("div",{className:"pl5 pr5 mb10"},n.createElement(b.a,{type:"primary",block:!0,onClick:this.sendOrders.bind(this,"",1)},"\u624b\u673a\u53f7\u5feb\u6377\u6d3e\u5355")),n.createElement(ne,H({},o,{label:"\u8f66\u578b\u8f66\u957f",className:G.a.carModelCar,style:{marginBottom:5}}),a("carModelCarLong")(n.createElement(E.a,{maxSelect:1,noHot:!0}))),n.createElement(ne,H({},o,{label:"\u5173\u952e\u8bcd\u641c\u7d22"}),a("searchInfo",{initialValue:""})(n.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u53f8\u673a\u59d3\u540d/\u8054\u7cfb\u7535\u8bdd"}))),n.createElement(ne,{className:"clearfix"},n.createElement(b.a,{type:"primary",className:"pull-right ml10 mr5",htmlType:"submit"},"\u67e5 \u8be2"),n.createElement(b.a,{onClick:this.handleReset,className:"pull-right"},"\u91cd \u7f6e")))),n.createElement("div",{className:G.a.blockBox},n.createElement(y.a,{style:{overflow:"auto",height:"100%"},itemLayout:"vertical",dataSource:this.state.listData,loading:i,renderItem:function(t,a){return n.createElement(y.a.Item,{key:t.utmsUsersDriversId},n.createElement("div",{className:[G.a.blockTag,t.active?G.a.active:""].join(" "),onClick:e.selectActive.bind(e,t,a)},n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:24},n.createElement("label",{className:G.a.label},"\u59d3\u540d\uff1a",n.createElement("span",{className:G.a.span},t.driverName||C.a.emptyRecord)))),n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:24},n.createElement("label",{className:G.a.label},"\u8054\u7cfb\u7535\u8bdd\uff1a",n.createElement("span",{className:G.a.span},t.phoneNumber)))),n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:24},n.createElement("label",{className:G.a.label},"\u8f66\u578b\uff1a",n.createElement("span",{className:G.a.span},t.vehicleLong?t.vehicleLong/1e3+"\u7c73"+t.vehicleType:"")))),n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:24},e.props.selectWaybill.tradeNumber?n.createElement("span",{className:G.a.span},"\u8ddd\u79bb\u53d1\u8d27\u5730\uff1a",t.distance?t.distance.toFixed(2):""," \u516c\u91cc"):"")),n.createElement(h.a,null,n.createElement(v.a,{span:24},e.state.selectWaybill.tradeNumber&&0!==e.state.selectWaybill.status?n.createElement(b.a,{className:"pull-right ml10 mr5",type:"primary",onClick:e.sendOrders.bind(e,t,3)},"\u6539\u6d3e"):n.createElement(b.a,{className:"pull-right ml10 mr5",type:"primary",onClick:e.sendOrders.bind(e,t,2)},"\u6d3e\u5355"),n.createElement(b.a,{className:"pull-right",onClick:function(){e.setState({detail:{visible:!0,utmsDriverId:t.utmsDriverId}})}},"\u8be6\u60c5")))))}})),n.createElement(g.a,{hideOnSinglePage:!0,className:"mt5",current:this.state.current,onChange:function(t){e.setState({current:t},e.seve)},total:this.props.vehicleDataCount,pageSize:10,size:"small",showQuickJumper:!0,style:{textAlign:"left"}})),n.createElement(Z,{wrappedComponentRef:this.saveFormRef,visible:this.state.shortcut.visible,onCancel:this.handleCancel,onCreate:this.handleOk,confirmLoading:this.state.shortcut.confirmLoading,selectVehicle:this.state.selectVehicle,title:this.state.shortcut.title,status:this.state.shortcutStatus,errCode:this.state.errCode}),n.createElement(B,{visible:this.state.detail.visible,onCancel:function(){e.setState({detail:{visible:!1}})},onCreate:function(){e.setState({detail:{visible:!1}})},utmsDriverId:this.state.detail.utmsDriverId}))}}])&&_(a.prototype,r),i&&_(a,i),t}())||J),ie=a("CtXQ"),oe=a("9ky0"),le=a.n(oe);function se(e){return(se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ue(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t){return!t||"object"!==se(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=u.a.Item,be=(p.a.Search,m.a.Option),ye=u.a.create()(ae=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=pe(this,me(t).call(this,e))).handleSubmit=function(e){a.props.getAsyncWaybilllist(Object.assign({coordinateType:"BD09",skipCount:(a.state.current-1)*a.state.pageSize,pageSize:a.state.pageSize},a.props.form.getFieldsValue()));var t=a.state.listData.map(function(e){return e.active=!1,e});a.setState({listData:t},function(){a.props.transfer({})})},a.toggleTopCollapse=function(e,t){if(1===e&&a.setState({waybillStatus:!a.state.waybillStatus}),2===e){var n=a.state.listData;n[t].show=!n[t].show,a.setState({listData:n})}},a.selectActive=function(e,t){e.active||a.setState({selectWaybill:e},function(){var n=a.state.listData.map(function(e,a){return e.active=t===a,e});a.setState({listData:n}),a.props.transfer(e)})},a.selectChange=function(e,t){var n={};n[e]=t,a.props.form.setFieldsValue(n),a.setState({current:1},a.handleSubmit)},a.handleReset=function(){a.props.form.resetFields(),a.setState({current:1,selectWaybill:{}},a.handleSubmit),a.props.transfer({})},a.state={listData:e.waybillData,waybillStatus:!1,selectWaybill:e.selectWaybill,current:1,pageSize:10},a}var a,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,n["PureComponent"]),a=t,(r=[{key:"componentWillReceiveProps",value:function(e){var t=this;e.waybillData.equals(this.props.waybillData)||this.setState({listData:e.waybillData.toJS()},function(){t.selectActive(e.selectWaybill,e.selectWaybill.index)}),e.selectWaybill.index!==this.props.selectWaybill.index&&this.selectActive(e.selectWaybill,e.selectWaybill.index)}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,r=(t.setFieldsValue,{labelCol:{span:7},wrapperCol:{span:16}}),i=["\u5f85\u8c03\u5ea6","\u5f85\u63a5\u5355","\u5f85\u7b7e\u5230","\u5f85\u88c5\u8d27","\u5f85\u5378\u8d27","\u5df2\u5b8c\u6210","\u5df2\u53d6\u6d88","\u5f85\u6539\u6d3e"];return n.createElement("div",{className:le.a.waybillContainer},n.createElement(f.a,{type:"inner",title:"\u8c03\u5ea6\u5217\u8868",className:[le.a.detailBox,this.state.waybillStatus?le.a.detailBoxHide:""].join(" "),bodyStyle:{paddingLeft:10,paddingRight:10},extra:n.createElement("a",{href:"javascript:;",onClick:this.toggleTopCollapse.bind(this,1)},n.createElement("i",{className:le.a.memu+" "+(this.state.waybillStatus?le.a.memuUP:le.a.memuDOWN)}))},n.createElement("div",null,n.createElement(u.a,{className:le.a.searchCondition,style:{marginBottom:16}},n.createElement(fe,ce({},r,{label:"\u72b6\u6001",className:"mb5"}),a("status",{initialValue:""})(n.createElement(m.a,{onChange:this.selectChange.bind(this,"status")},n.createElement(be,{value:""},"\u5168\u90e8"),n.createElement(be,{value:"0"},"\u5f85\u8c03\u5ea6"),n.createElement(be,{value:"1"},"\u5f85\u63a5\u5355"),n.createElement(be,{value:"7"},"\u5f85\u6539\u6d3e")))),n.createElement(fe,ce({},r,{label:"\u5173\u952e\u8bcd\u641c\u7d22"}),a("keywords",{initialValue:""})(n.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u8fd0\u5355\u53f7/\u8054\u7cfb\u7535\u8bdd",onKeyDown:function(t){13===t.keyCode&&e.selectChange("searchInfo",e.props.form.getFieldValue("keywords"))}}))),n.createElement(fe,{className:"clearfix"},n.createElement(b.a,{type:"primary",onClick:this.selectChange.bind("keywords"),className:"pull-right ml10 mr5"},"\u67e5 \u8be2"),n.createElement(b.a,{onClick:this.handleReset,className:"pull-right"},"\u91cd \u7f6e")))),n.createElement("div",{style:{textAlign:"center",borderTop:"1px solid #E4E7EF",padding:"10px 0"}},"\u6709",n.createElement("span",{className:"ml5 mr5"},this.props.waybillDataCount),"\u7b14\u5f85\u8c03\u5ea6\u8fd0\u5355",n.createElement("a",{href:"javascript:;",className:"ml10",onClick:this.selectChange.bind("keywords")},n.createElement(ie.a,{type:"sync",theme:"outlined"}))),n.createElement("div",{className:le.a.blockBox},n.createElement(y.a,{style:{overflow:"auto",height:"100%"},itemLayout:"vertical",dataSource:this.state.listData,loading:this.props.waybillLoading,renderItem:function(t,a){return n.createElement(y.a.Item,{key:t.tradeNumber},n.createElement("div",{className:[le.a.blockTag,t.active?le.a.active:""].join(" "),onClick:e.selectActive.bind(e,t,a)},n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:18},n.createElement("label",{className:le.a.label},"\u6240\u9700\u8f66\u578b\uff1a",n.createElement("span",{className:le.a.span},t.fromCarLong/1e3,"\u7c73",t.fromCarStruct))),n.createElement(v.a,{span:6},n.createElement("span",{style:{color:"#67AE19",border:"1px solid #67AE19",borderRadius:4,padding:"3px 5px"}},i[t.status]))),n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:24},n.createElement("label",{className:le.a.label},"\u88c5\u5378\u70b9\uff08\u4e2a\uff09\uff1a",n.createElement("span",{className:le.a.span},t.wayPointNum)))),n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:12},n.createElement("label",{className:le.a.label},"\u91cd\u91cf\uff08\u5343\u514b\uff09\uff1a",n.createElement("span",{className:le.a.span},t.goodsWeight))),n.createElement(v.a,{span:12},n.createElement("label",{className:le.a.label},"\u4f53\u79ef\uff08\u65b9\uff09\uff1a",n.createElement("span",{className:le.a.span},t.goodsVolume)))),n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:24},n.createElement("label",{className:le.a.label},"\u8d27\u4e3b\u7535\u8bdd\uff1a",n.createElement("span",{className:le.a.span},t.customerMobilenumber)))),t.utmsTradeWayPoints.map(function(e,t){if(t<=1)return n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:3},1===e.loadType?n.createElement("span",{style:{color:"#e63a00",border:"1px solid #e63a00",padding:"0 2px",borderRadius:30}},"\u5378"):n.createElement("span",{style:{color:"#7bb507",border:"1px solid #7bb507",padding:"0 2px",borderRadius:30}},"\u88c5")),n.createElement(v.a,{span:21},n.createElement("label",{className:le.a.label},n.createElement("span",{className:le.a.span},e.address))))}),t.utmsTradeWayPoints.length>2?n.createElement("div",null,n.createElement("div",{className:t.show?le.a.show:le.a.hide},t.utmsTradeWayPoints.map(function(e,t){if(t>=2)return n.createElement(h.a,{className:"mb5"},n.createElement(v.a,{span:3},1===e.loadType?n.createElement("span",{style:{color:"#e63a00",border:"1px solid #e63a00",padding:"0 2px",borderRadius:30}},"\u5378"):n.createElement("span",{style:{color:"#7bb507",border:"1px solid #7bb507",padding:"0 2px",borderRadius:30}},"\u88c5")),n.createElement(v.a,{span:21},n.createElement("label",{className:le.a.label},n.createElement("span",{className:le.a.span},e.address))))})),n.createElement("div",{style:{textAlign:"center"}},n.createElement("a",{href:"javascript:;",onClick:e.toggleTopCollapse.bind(e,2,a)},"\u5c55\u5f00",n.createElement(ie.a,{type:t.show?"up":"down",theme:"outlined"})))):"",n.createElement(h.a,null,n.createElement(v.a,{span:15},n.createElement("label",{className:le.a.label},t.useCarDate)),n.createElement(v.a,{span:8},n.createElement("span",{style:{color:"#000",fontSize:14}},t.cost?"\uffe5"+t.cost.toFixed(2):"")))))}})),n.createElement(g.a,{hideOnSinglePage:!0,className:"mt5",current:this.state.current,onChange:function(t){e.setState({current:t},e.handleSubmit)},total:this.props.waybillDataCount,pageSize:this.state.pageSize,size:"small",showQuickJumper:!0,style:{textAlign:"left"}})))}}])&&ue(a.prototype,r),i&&ue(a,i),t}())||ae,he=a("V2dt"),ve=a.n(he),ge=a("L/Qa"),Ee=a.n(ge),Se=a("qy9r"),we=a.n(Se);function Ce(e){return(Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e,t){return!t||"object"!==Ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=ke(this,(e=Me(t)).call.apply(e,[this].concat(r)))).state={goodsMarkers:[],selectedGoodsMarker:[],waybillData:[],selectWaybill:{},driverMarkers:[],vehicleData:[],selectVehicle:{},bigDriver:{},current:1,skipCount:0,pageSize:10},a.divMap=void 0,a.map=void 0,a.init=function(){a.props.getAsyncWaybilllist({skipCount:a.state.skipCount,pageSize:a.state.pageSize,coordinateType:"BD09"}),a.props.getAsyncVehiclelist({sortRule:1,longitude:120.209761,latitude:30.255578,enterCoordinateType:"BD09",outputCoordinateType:"BD09",skipCount:a.state.skipCount,pageSize:a.state.pageSize})},a.removeElement=function(e){e&&e.parentElement.removeChild(e)},a.initMap=function(){setTimeout(function(){a.map=new BMap.Map(a.divMap,{minZoom:5,maxZoom:19,enableMapClick:!1}),a.map.enableScrollWheelZoom(!0),a.map.addEventListener("tilesloaded",function(){a.removeElement(document.querySelector(".anchorBL")),a.removeElement(document.querySelector(".BMap_cpyCtrl"))}),a.map.centerAndZoom("\u676d\u5dde",13)})},a.addGoodsInMap=function(){a.removeMarkers(a.state.goodsMarkers),a.removeMarkers(a.state.selectedGoodsMarker),a.setState({goodsMarkers:[],selectedGoodsMarker:[]}),a.state.waybillData.map(function(e,t){if(0!==e.utmsTradeWayPoints.length){var n=new BMap.Marker(new BMap.Point(e.utmsTradeWayPoints[0].longitude,e.utmsTradeWayPoints[0].latitude),{icon:new BMap.Icon(ve.a,new BMap.Size(36,43))});n.index=t,a.map.addOverlay(n);var r=a.state.goodsMarkers;r.push(n),a.setState({goodsMarkers:r}),n.onclick=function(t){var n=t.currentTarget;if(n){var r=e;r.index=n.index,a.setState({selectWaybill:r},a.goodSelect)}}}})},a.goodSelect=function(){a.removeMarkers(a.state.selectedGoodsMarker),a.setState({selectedGoodsMarker:[]});var e=a.state.selectWaybill;if(e.tradeNumber){var t=new BMap.Icon(we.a,new BMap.Size(36,43)),n=new BMap.Icon(Ee.a,new BMap.Size(36,43)),r=e.utmsTradeWayPoints.map(function(e){if(e.longitude){var r={};0===e.loadType?r=new BMap.Marker(new BMap.Point(e.longitude,e.latitude),{icon:t}):1===e.loadType&&(r=new BMap.Marker(new BMap.Point(e.longitude,e.latitude),{icon:n})),a.map.addOverlay(r);var i=a.state.selectedGoodsMarker;return i.push(r),a.setState({selectedGoodsMarker:i}),r}});r=r.filter(function(e){return e});var i=new BMap.DrivingRoute(a.map,{onSearchComplete:function(e){if(i.getStatus()===BMAP_STATUS_SUCCESS){for(var t=[],n=0;n<e.getPlan(0).getNumRoutes();n++){var r=e.getPlan(0).getRoute(n).getPath(),l=new BMap.Polyline(r,{strokeColor:"#227DE6",strokeWeight:8,strokeOpacity:1,icons:[o()]});a.map.addOverlay(l);var s=a.state.selectedGoodsMarker;s.push(l),a.setState({selectedGoodsMarker:s}),t=t.concat(t,r)}a.map.setViewport(t)}}}),o=function(){return new BMap.IconSequence(new BMap.Symbol("M0 -4 L-3 -1 L0 -3 L3 -1 Z",{scale:.9,strokeWeight:1,strokeColor:"#fff"}),"100%","5%")};i.search(r[0],r[r.length-1],{waypoints:r.slice(1,r.length-1)})}},a.addVehicleInMap=function(){a.removeMarkers(a.state.driverMarkers),a.setState({driverMarkers:[],bigDriver:{}},function(){a.state.vehicleData.map(function(e,t){var n,r=new BMap.Point(e.longitude,e.latitude),i={};n=a.driverMarkerDiv(e,!1),i=new BMapLib.RichMarker(n,r,{anchor:new BMap.Size(-30,0)}),a.map.addOverlay(i),i.data=e,i.data.driverIndex=t,i.index=t;var o=a.state.driverMarkers;o.push(i),a.setState({driverMarkers:o}),i.onclick=function(t){var n=t.currentTarget;if(n){var r=e;r.index=n.index,a.setState({selectVehicle:r},a.driverSelect)}}})})},a.driverSelect=function(){a.state.selectWaybill.utmsTradeWayPoints&&a.state.selectWaybill.utmsTradeWayPoints[0].longitude&&a.state.selectVehicle.phoneNumber?a.map.setViewport([new BMap.Point(a.state.selectWaybill.utmsTradeWayPoints[0].longitude,a.state.selectWaybill.utmsTradeWayPoints[0].latitude),new BMap.Point(a.state.selectVehicle.longitude,a.state.selectVehicle.latitude)]):a.state.selectVehicle.phoneNumber&&a.map.setViewport([new BMap.Point(a.state.selectVehicle.longitude,a.state.selectVehicle.latitude)]),a.state.bigDriver.data&&(a.state.bigDriver.setContent(a.driverMarkerDiv(a.state.bigDriver.data,!1)),l.a.findDOMNode(a.state.bigDriver._container).style.zIndex=0),a.state.vehicleData.map(function(e,t){a.state.selectVehicle&&e.phoneNumber===a.state.selectVehicle.phoneNumber&&(a.state.driverMarkers[t].setContent(a.driverMarkerDiv(e,!0)),a.setState({bigDriver:a.state.driverMarkers[t]}),l.a.findDOMNode(a.state.driverMarkers[t]._container).style.zIndex=1)})},a.driverMarkerDiv=function(e,t){var a={"\u9ad8\u680f":c.a.gaolan,"\u680f\u677f\u8f66":c.a.lanban,"\u53a2\u5f0f\u8d27\u8f66":c.a.xiangshi,"\u4e2d\u9762":c.a.mianbao,"\u5927\u9762":c.a.mianbao,"\u5c0f\u9762":c.a.mianbao,"\u9762\u5305\u8f66":c.a.mianbao,"\u6302\u8f66":c.a.guache}[e.vehicleType];return t?'<div class="'.concat(c.a.driverMarker," ").concat(c.a.driverMarkerBig," ").concat(a,'">\n        <div class="').concat(c.a.driverMarkerMain,'">\n          <span>\u8f66\u578b\uff1a').concat(e.vehicleLong?e.vehicleLong/1e3+"\u7c73"+e.vehicleType:"","</span><br/>\n          <span>\u8ddd\u79bb\u53d1\u8d27\u5730\uff1a").concat(e.distance?e.distance.toFixed(2):"","\u516c\u91cc</span><br/>\n          <span>\u53f8\u673a\uff1a ").concat(e.driverName?e.driverName:"","</span><br/>\n          <span>\u65f6\u95f4\uff1a ").concat(e.lastUploadPositionDate?e.lastUploadPositionDate:"","</span><br/>\n          <span>\u7535\u8bdd\uff1a ").concat(e.phoneNumber,"</span><br/>\n        </div>\n      </div>"):"<div class='"+c.a.driverMarker+" "+a+"'><div class='"+c.a.driverMarkerMain+"'><span>"+e.vehicleLong/1e3+"\u7c73</span></div></div>"},a.removeMarkers=function(e){e&&e.length>0&&(e.map(function(e){e.hide(),a.map.removeOverlay(e)}),e=[])},a.transferWaybill=function(e){a.setState({selectWaybill:e},a.goodSelect)},a.transferVehicle=function(e){a.setState({selectVehicle:e},a.driverSelect)},a}var a,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,n["PureComponent"]),a=t,(r=[{key:"componentDidMount",value:function(){this.initMap(),this.init()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.waybillData.equals(this.props.waybillData)||this.setState({waybillData:e.waybillData.toJS()},function(){t.state.waybillData&&t.addGoodsInMap()}),e.vehicleData.equals(this.props.vehicleData)||this.setState({vehicleData:e.vehicleData.toJS()},function(){t.state.vehicleData&&t.addVehicleInMap()})}},{key:"render",value:function(){var e=this,t=this.props,a=t.vehicleData,r=t.getAsyncVehiclelist,i=t.vehicleLoading,o=t.vehicleDataCount,l=t.getAsyncWaybilllist,s=t.waybillData,u=t.waybillLoading,p=t.waybillDataCount;return n.createElement("div",{className:c.a.mapContainer},n.createElement(ye,{waybillData:s,selectWaybill:this.state.selectWaybill,getAsyncWaybilllist:l,waybillLoading:u,waybillDataCount:p,transfer:this.transferWaybill,initFn:this.init}),n.createElement(re,{vehicleData:a,getAsyncVehiclelist:r,vehicleLoading:i,vehicleDataCount:o,selectWaybill:this.state.selectWaybill,selectVehicle:this.state.selectVehicle,transfer:this.transferVehicle,initFn:this.init}),n.createElement("div",{ref:function(t){return e.divMap=t},className:c.a.mapBox}))}}])&&Ae(a.prototype,r),i&&Ae(a,i),t}(),De=a("XoLn"),We=a.n(De);function xe(e){return(xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Be(e,t){return!t||"object"!==xe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Be(this,Pe(t).apply(this,arguments))}var a,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,n["PureComponent"]),a=t,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.vehicleData,a=e.getAsyncVehiclelist,r=e.vehicleLoading,i=e.vehicleDataCount,o=e.waybillData,l=e.getAsyncWaybilllist,s=e.waybillLoading,c=e.waybillDataCount;return n.createElement("div",{className:We.a.TransportDispatch},n.createElement(Ne,{vehicleData:t,getAsyncVehiclelist:a,vehicleLoading:r,vehicleDataCount:i,waybillData:o,getAsyncWaybilllist:l,waybillLoading:s,waybillDataCount:c}))}}])&&je(a.prototype,r),i&&je(a,i),t}();t.default=function(e){var t=e.routeId;return(0,e.connectModel)(function(e){var a,n=function(e){return e.get(t)};return{mapStateToProps:Object(i.createStructuredSelector)({vehicleError:(a=n,Object(i.createSelector)(a,function(e){return e.get("vehicleError")})),vehicleLoading:function(e){return Object(i.createSelector)(e,function(e){return e.get("vehicleLoading")})}(n),vehicleData:function(e){return Object(i.createSelector)(e,function(e){return e.get("vehicleData")})}(n),vehicleDataCount:function(e){return Object(i.createSelector)(e,function(e){return e.get("vehicleDataCount")})}(n),waybillError:function(e){return Object(i.createSelector)(e,function(e){return e.get("waybillError")})}(n),waybillLoading:function(e){return Object(i.createSelector)(e,function(e){return e.get("waybillLoading")})}(n),waybillData:function(e){return Object(i.createSelector)(e,function(e){return e.get("waybillData")})}(n),waybillDataCount:function(e){return Object(i.createSelector)(e,function(e){return e.get("waybillDataCount")})}(n)}),mapDispatchToProps:function(t){return{getAsyncVehiclelist:function(a){return t(e.getAsyncVehiclelist(a))},getAsyncWaybilllist:function(a){return t(e.getAsyncWaybilllist(a))}}}}})(Te)}},qy9r:function(e,t){e.exports="data:image/png;base64,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"},ytNb:function(e,t,a){e.exports={mapContainer:"cw2pn",mapBox:"tJjSd",driverMarker:"_3WCH9",driverMarkerMain:"qtZPe",gaolan:"_1XaiB",guache:"_3QjY0",lanban:"_31XWU",mianbao:"_2fHUw",xiangshi:"_2NhLB",driverMarkerBig:"_2E8Qj"}}}]);
//# sourceMappingURL=transport-dispatch.c716aad8.chunk.js.map