(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"ZHj/":function(e,t,n){e.exports={WaybillMap:"RfSkx",WaybillMap__box:"bFzir",waybillSidebar:"_3eACd",waybillSidebar__toggle:"_2maBq",waybillSidebar__down:"_36R44",waybillSidebar__sidebar:"_1NAXn",waybillSidebar__content:"cJ62p",waybillSidebar__userInfo:"_1Ugan",waybillSidebar__userInfoL:"_1rdWt",waybillSidebar__userInfoR:"_1lsF5",waybillSidebar__userInfoName:"_2yLIJ",waybillSidebar__userInfoLine:"_1jnwE",waybillSidebar__line:"ChbQs",waybillSidebar__orderInfo:"_2WfPC",waybillSidebar__bottomBox:"_3RVzq",waybillSidebar__Switch:"l10EX",waybillSidebar__orderBox:"_3irqs",step5:"_2SvR7",step4:"_3ZdKZ",step3:"_23PDL",step2:"_1cTFY",step6:"k4G2s",step1:"_25qox"}},ZzAz:function(e,t,n){"use strict";n.r(t);var a=n("wd/R"),r=n.n(a),o=n("q1tI"),i=n("/MKj"),l=n("ANjH"),s=n("peh1"),u=n("Gytx"),c=n.n(u);function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var n,a=e.type,r=e.data,o=e.onClick,i=e.onShowInfo,l=e.onHideInfo;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=f(this,h(t).call(this))).data=void 0,n.type=a,n.data=r,n.point=new BMap.Point(r.longitude,r.latitude),n.onClick=o,n.onShowInfo=i,n.onHideInfo=l,n}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,BMap.Overlay),n=t,(a=[{key:"initialize",value:function(e){var t=this;this.map=e;var n=document.createElement("div");return n.style.position="absolute",n.style.width="34px",n.style.height="42px",n.style.cursor="pointer",0===this.type?(n.style.zIndex="3",n.innerHTML="<img src='https://image.tf56.com/dfs/group1/M00/66/B4/CiFBCVujVEyARfifAAAHS3KgShs905.png'>"):1===this.type?(n.style.zIndex="1",n.innerHTML="<img src='https://image.tf56.com/dfs/group1/M00/66/B4/CiFBCVujVDKAaRbkAAAGsTheId8483.png'>"):2===this.type?(n.style.zIndex="1",n.innerHTML="<img src='https://image.tf56.com/dfs/group1/M00/66/B4/CiFBClujVFmAa-yDAAAG7-raXJk566.png'>"):3===this.type&&(n.style.zIndex="1",n.innerHTML="<img src='https://image.tf56.com/dfs/group1/M00/66/B4/CiFBCVujU-KAN73xAAAH4eb8avA311.png'>"),n.onclick=function(e){t.onClick&&t.onClick(t)},n.onmouseenter=function(){t.onShowInfo&&t.onShowInfo(t.data)},n.onmouseout=function(){t.onHideInfo&&t.onHideInfo(t.data)},this.map.getPanes().labelPane.appendChild(n),this.div=n,n}},{key:"draw",value:function(){var e=this.map.pointToOverlayPixel(this.point);this.div.style.left=e.x-17+"px",this.div.style.top=e.y-21+"px"}},{key:"destroy",value:function(){this.div.onclick=null,this.type=null,this.data=null,this.point=null,this.onClick=null,this.onShowInfo=null,this.onHideInfo=null,this.map=null}}])&&d(n.prototype,a),r&&d(n,r),t}(),b=n("kg9Z"),v=n.n(b);function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function E(e,t){return!t||"object"!==w(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e,t,n){return(S="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=E(this,P(t).call(this))).width=280,e.height=114,e}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,BMap.Overlay),n=t,(a=[{key:"initialize",value:function(e){return this.map=e,this.div=document.createElement("div"),this.div.style.width="".concat(this.width,"px"),this.div.style.height="".concat(this.height,"px"),this.div.className=v.a.divInfoWindow,this.divCurrow=document.createElement("div"),this.divCurrow.className=v.a.curr,this.div.appendChild(this.divCurrow),this.content=document.createElement("div"),this.content.className=v.a.divf,this.div.appendChild(this.content),this.map.getPanes().labelPane.appendChild(this.div),this.div}},{key:"draw",value:function(){var e=this.map.pointToOverlayPixel(this.point),t=e.x-this.width/2,n=e.y-this.height-31,a=this.width/2-11,r=this.height-5,o=this.div.parentElement.parentElement.parentElement;if(o){var i=this.map.getContainer(),l=i.offsetWidth,s=(i.offsetHeight,t+o.offsetLeft),u=n+o.offsetTop;s<0?(t=e.x-this.width/2-s,a=a+s+0):s+this.width>l&&(t=e.x-this.width/2-(this.width+s-l)-0,a=a+(this.width+s-l)+3+1),u-90<0?(n=e.y+26,r=-10,this.divCurrow.style.transform="rotate(45deg)"):(r-=7,this.divCurrow.style.transform="rotate(-45deg)")}this.div.style.left=t+"px",this.div.style.top=n+"px",this.divCurrow.style.left=a+"px",this.divCurrow.style.top=r+"px"}},{key:"setSize",value:function(){this.div.style.width=this.width+"px",this.div.style.height=this.height+"px"}},{key:"show",value:function(){S(P(t.prototype),"show",this).call(this),this.draw()}},{key:"setPosition",value:function(e){this.point=e}},{key:"showValue",value:function(e){return null===e||void 0===e||""===e?"":e}},{key:"setData",value:function(e){var t;"1"===e.mode?t="GPS":"2"===e.mode?t="\u57fa\u7ad9":"3"===e.mode&&(t="WIFI");var n=e.realtime.slice(0,19);this.content.innerHTML="<table><tr><th>\u5f53\u524d\u4f4d\u7f6e\uff1a</th><td>"+this.showValue(e.useextendcode)+"</td></tr><tr><th>\u5b9a\u4f4d\u65f6\u95f4\uff1a</th><td>"+this.showValue(n)+"</td></tr><tr><th>\u901f\u5ea6\uff1a</th><td>"+this.showValue(e.speed)+"km/h</td></tr><tr><th>\u5b9a\u4f4d\u65b9\u5f0f\uff1a</th><td>"+this.showValue(t)+"</td></tr></table>"}}])&&g(n.prototype,a),r&&g(n,r),t}(),k=n("tsqr"),O=n("W9HT"),M=n("ZHj/"),A=n.n(M),j=n("TSYQ"),I=n.n(j),x=n("2/Rp"),T=n("2fM7"),L=n("kPKH"),B=n("BMrR"),D=n("Sdc0");function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function z(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=T.a.Option,V=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=z(this,R(t).call(this,e))).state=void 0,n.toggleTopCollapse=function(){n.setState({topCollapse:!n.state.topCollapse})},n.toggleBottomCollapse=function(){n.setState({bottomCollapse:!n.state.bottomCollapse})},n.handleChangeFilter=function(e){n.props.onChange(e,"filter")},n.handleChangeMode=function(e){n.props.onChange(e,"mode")},n.handleChangeSpeed=function(e){n.props.onChange(e,"speed")},n.renderWayList=function(){var e=[],t=(n.props.data||{}).utmsTradeWayPoints||[],a=t.length;if(0!==a){for(var r=a-1;r>=0;r--){var i=t[r].reachAddress||t[r].reachLat&&t[r].reachLng?o.createElement("li",{key:r,className:0===t[r].loadType?A.a.step4:A.a.step5},o.createElement("p",null,t[r].reachAddress||"----"),o.createElement("p",null,t[r].reachDate)):null;e.push(i)}return e}},n.renderWaybillInfo=function(){var e,t=n.props.data,a=n.state.topCollapse,r="";return t.status&&(0===t.status?r="\u5f85\u8c03\u5ea6":1===t.status?r="\u5f85\u63a5\u5355":2===t.status?r="\u5f85\u7b7e\u5230":3===t.status?r="\u5f85\u88c5\u8d27":4===t.status?r="\u5f85\u5378\u8d27":5===t.status?r="\u5df2\u5b8c\u6210":6===t.status?r="\u5df2\u53d6\u6d88":7===t.status&&(r="\u5f85\u6539\u6d3e")),o.createElement("div",{className:A.a.waybillSidebar__orderInfo},o.createElement("h3",null,"\u8ba2\u5355\u4fe1\u606f",o.createElement("small",null,r)),o.createElement("h4",null,o.createElement("span",null,"\u8fd0\u5355\u53f7: "),t.tradeNumber),o.createElement("p",{className:I()((e={},W(e,A.a.waybillSidebar__toggle,!0),W(e,A.a.waybillSidebar__down,!a),e)),onClick:function(){n.toggleTopCollapse()}},a?"\u5c55\u5f00":"\u6536\u8d77",o.createElement("small",null)))},n.renderUserInfo=function(){var e=n.props.data;return o.createElement("div",{className:A.a.waybillSidebar__userInfo},o.createElement("div",{className:A.a.waybillSidebar__userInfoL},o.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAXpQTFRFAAAA////4+Pj////5ubm////8PDw////4+Pj7Ozs9vb24+Pj7Ozs8fHx5eXl6Ojo8vLy4+Pj7Ozs7u7u8fHx5OTk6urq7Ozs7+/v8vLy5OTk6+vr8PDw8/Pz4uLi6urq7+/v8fHx8/Pz4uLi6+vr8/Pz4+Pj7+/v8PDw8vLy4+Pj7u7u8fHx4uLi8PDw8fHx4+Pj8PDw8fHx4uLi8vLy4+Pj8fHx8vLy4+Pj8PDw8fHx4+Pj8fHx4uLi8vLy4uLi8vLy4uLi4uPi4+Pj5OTk5OXk5eXl5ubm5+fn6Ojo6enp6erp6urq6+vr6+zr7Ozs7O3r7e3t7e7s7u7t7u7u7u/t7+/u7+/v7/Du8PDw8fHx8fLw8vLx8vLy8vPx8/Pz8/Ty9PTz9PT09PXz9fb09vb19vb29/f39/j1+Pj2+Pj3+Pj4+fn4+vr4+vr5+vr6+/v5+/v7/Pz6/Pz8/P36/f37/f38/f77/v78/v7+/v/8///9///+////IZRGWAAAAEF0Uk5TAAMJCQoKEREbGxs3NzdOTk5cXFxcYGBgYGBmZmZmfHx8fHyPj4+vr6+vt7e3y8vL29vb5ubs7Ozy8vL19ff3+fnGGasbAAACnElEQVRIx4VW+0MSQRBeBCnzEZRWmmhhWBiGAYr5QJajQwiyMwpYNItM7UFRaOAa/3sHB3czezy+H3e+b2dvd+abI0SE1eHxBcLRaDjg8zisZADs97xbDGDLO32tD3344QYzYcM93INumQ2xrgi5LN34I37WE/4bZv4Y2L6gZDLpZDKlFPQk4yL/dkSnZxO0AyndWYxMYv4tY/sMhUjo60gxZuyvUIykngOcagScPy4IaFb/Dv3LLc8M/p568B4pmL9zu/fBBe5SUwr9qphL49vge0mSlH8Va1Nf5o/TknEmFtLefB7wC1TOc147K757s18845yfU5oxwu5Wvb0AghylHzmCZLyFWlfNSrwDayBL6QcsiMkpEJ9WBY8ZzlDEAiqDIzGv2i+o/tlbCQtqNPsJ9oeV3ET8Cn+NBeexGv8GCA7yCAnq/PgzPtI+5xVA8JCnSHDBRdQ4/wEIPvIcCUp1k4JfHAJCgKzh3iqV/2D615+Qz8IkKrbje8SvZHE0ahYoKMUBEwVrpo4/APyyGAwLH91CWefXj8RYQLjWFg71y/1iivmEh9Pw/apFv/prDnmE0tBw2vjXRKNqDjnE4tMyNDSYBWrxkSd4Kbd3Ur1sCy6rv5VsgeHyJneBQ6YTqmWUGgaqamfLKQU1kF2z+FxS7hgREBy1LXM3ldNblDxo8Q03igNBEhuaWxsjTZtJAyNiOv8EG1rbZsisKkhC6zpt83/FsS27OlbpbzoeMrsWv4RMMG5YZdOME9gepbSSkYWlEBhD4xGZDsI2GkKT8YECJx5Bzu0B+zvFITca7McPjnYZu8u9+cvXuw72mR5JgjOWHv8Ctrl1M319ztbv52RqcROyNxen7IN+aIYmFpZWVnd2VleWFiaGTOH/F+9koN3+ab4AAAAASUVORK5CYII=",alt:""})),o.createElement("div",{className:A.a.waybillSidebar__userInfoR},o.createElement("h4",null,o.createElement("span",{className:A.a.waybillSidebar__userInfoName},e.driverName),e.driverMobilenumber),o.createElement("h4",null,e.driverCarStruct,o.createElement("span",{className:A.a.waybillSidebar__userInfoLine}),e.driverCarplatenumber)))},n.renderTrack=function(){var e=n.props,t=e.data,a=e.lbsPoints;return o.createElement("div",{className:A.a.waybillSidebar__orderBox},o.createElement("h3",null,"\u5728\u9014\u8ddf\u8e2a"),o.createElement("p",null,o.createElement("span",null,"\u5b9e\u9645\u8fd0\u8f93\u8ddd\u79bb: "),t.actualDistance),o.createElement("p",null,o.createElement("span",null,"\u8f68\u8ff9\u70b9\u6570: "),a),o.createElement("ul",null,null!==t.finishDate&&t.finishDate?o.createElement("li",{className:A.a.step6},o.createElement("p",null,o.createElement("span",null,"\u8ba2\u5355\u5b8c\u6210\u65f6\u95f4\uff1a"),t.finishDate)):null,n.renderWayList(),null!==t.signDate?o.createElement("li",{className:A.a.step3},o.createElement("p",null,o.createElement("span",null,"\u53f8\u673a\u7b7e\u5230\u65f6\u95f4\uff1a"),t.signDate)):null,null!==t.receiveDate?o.createElement("li",{className:A.a.step2},o.createElement("p",null,o.createElement("span",null,"\u53f8\u673a\u63a5\u5355\u65f6\u95f4\uff1a"),t.receiveDate)):null,o.createElement("li",{className:A.a.step1},o.createElement("p",null,o.createElement("span",null,"\u8ba2\u5355\u53d1\u5e03\u65f6\u95f4\uff1a"),t.createDate))))},n.handleChangeSwitch=function(e){n.setState({loading:!0}),n.props.handleChangeSwitch(e),setTimeout(function(){n.setState({loading:!1})},500)},n.renderPathPlanning=function(){var e=n.state.loading,t=n.props.data,a=t.utmsTradeWayPoints||[],r=0;return o.createElement("div",{className:A.a.waybillSidebar__orderBox},o.createElement("h3",null,"\u8ba2\u5355\u8def\u5f84\u89c4\u5212",a.length?o.createElement("div",{className:A.a.waybillSidebar__Switch},o.createElement(D.a,{loading:e,checkedChildren:"\u5f00",unCheckedChildren:"\u5173",defaultChecked:!0,onChange:n.handleChangeSwitch})):null),o.createElement("p",null,o.createElement("span",null,"\u9884\u8ba1\u8fd0\u8f93\u8ddd\u79bb: "),t.preDistance||"--","\u5343\u7c73"),o.createElement("p",null,o.createElement("span",null,"\u88c5\u5378\u70b9: "),t.wayPointNum||"--","\u4e2a"),a.map(function(e,t){return 1===e.loadType&&r++,o.createElement("p",{key:t},o.createElement("span",null,0===e.loadType?"\u88c5\u8d27\u5730\u5740:":t===a.length-1?"\u5378\u8d27\u5730\u5740:":"\u9014\u7ecf\u70b9".concat(r,":")),e.address)}))},n.renderPlayback=function(){var e,t=n.state.bottomCollapse;return o.createElement("div",{className:A.a.waybillSidebar__bottomBox},o.createElement("p",{className:I()((e={},W(e,A.a.waybillSidebar__toggle,!0),W(e,A.a.waybillSidebar__down,!t),e)),onClick:function(){n.toggleBottomCollapse()}},t?"\u5c55\u5f00":"\u6536\u8d77",o.createElement("small",null)),t?null:o.createElement("div",{className:A.a.waybillSidebar__orderBox},o.createElement("h3",null,"\u64ad\u653e\u8f68\u8ff9"),o.createElement("div",null,o.createElement(B.a,null,o.createElement(L.a,{span:6},"\u8f68\u8ff9\u7c7b\u578b:"),o.createElement(L.a,{span:18},o.createElement(T.a,{style:{width:"100%"},defaultValue:"true",onChange:n.handleChangeFilter},o.createElement(Y,{value:"true"},"\u4f18\u5316\u8f68\u8ff9"),o.createElement(Y,{value:"false"},"\u539f\u59cb\u8f68\u8ff9")))),o.createElement(B.a,null,o.createElement(L.a,{span:6},"\u5750\u6807\u7c7b\u578b:"),o.createElement(L.a,{span:18},o.createElement(T.a,{style:{width:"100%"},defaultValue:"",onChange:n.handleChangeMode},o.createElement(Y,{value:""},"\u5168\u90e8"),o.createElement(Y,{value:"GPS"},"GPS"),o.createElement(Y,{value:"GSM"},"\u57fa\u7ad9"),o.createElement(Y,{value:"WIFI"},"Wi-Fi")))),o.createElement(B.a,null,o.createElement(L.a,{span:6},"\u901f\u5ea6:"),o.createElement(L.a,{span:18},o.createElement(T.a,{style:{width:"100%"},defaultValue:"3500",onChange:n.handleChangeSpeed},o.createElement(Y,{value:"3500"},"\u975e\u5e38\u5feb(3500m/s)"),o.createElement(Y,{value:"3000"},"\u5f88\u5feb(3000m/s)"),o.createElement(Y,{value:"2500"},"\u6bd4\u8f83\u5feb(2500m/s)"),o.createElement(Y,{value:"2000"},"\u4e00\u822c(2000m/s)"),o.createElement(Y,{value:"1500"},"\u6162\u901f(1500m/s)"),o.createElement(Y,{value:"1000"},"\u5f88\u6162(1000m/s)"),o.createElement(Y,{value:"500"},"\u975e\u5e38\u6162(500m/s)")))),o.createElement(B.a,{gutter:10},o.createElement(L.a,{span:12},o.createElement(x.a,{onClick:n.props.handlePause},"\u6682\u505c")),o.createElement(L.a,{span:12},o.createElement(x.a,{type:"primary",onClick:n.props.handlePlayback},"\u64ad\u653e\u8f68\u8ff9"))))))},n.state={loading:!1,mode:"",filter:!0,speed:3500,topCollapse:!0,bottomCollapse:!0},n}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,o["PureComponent"]),n=t,(a=[{key:"render",value:function(){var e=this.state.topCollapse;return o.createElement("div",{className:A.a.waybillSidebar},o.createElement("h2",null,"\u8ba2\u5355\u8ddf\u8e2a"),o.createElement("div",{className:A.a.waybillSidebar__sidebar},o.createElement("div",{className:A.a.waybillSidebar__content},this.renderUserInfo(),this.renderWaybillInfo(),e?null:this.renderPathPlanning(),this.renderTrack(),this.renderPlayback())))}}])&&H(n.prototype,a),r&&H(n,r),t}();function Z(e){return(Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function q(e,t){return!t||"object"!==Z(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=q(this,Q(t).call(this,e))).state=void 0,n.divMap=void 0,n.infoWindow=void 0,n.map=void 0,n.lushu=void 0,n.lbsPolyline=void 0,n.locationCP=void 0,n.driving=void 0,n.removeMapElement=function(e){e&&e.parentElement.removeChild(e)},n.handleInputChange=function(e,t){"filter"===t?n.setState({filter:e},function(){n.selectLbsTrack()}):"mode"===t?n.setState({mode:e},function(){n.selectLbsTrack()}):"speed"===t&&n.setState({speed:e})},n.handleChangeSwitch=function(e){n.setState({loading:!0}),e?n.initPlanMarkers():n.map.clearOverlays(),setTimeout(function(){n.initReachMarkers(),n.locationMarker(),n.initLbsPolyline()},300),setTimeout(function(){n.setState({loading:!1})},500)},n.handlePause=function(){n.lushu._opts?n.lushu.stop():k.a.error("\u6ca1\u6709\u8f68\u8ff9")},n.handlePlayback=function(){if(n.lushu._opts){var e=n.state,t=e.speed,a=e.lbsMarkers;n.map.setViewport(a,{margins:[0,300,0,0]}),n.lushu._opts.speed=t,n.lushu.stop(),n.lushu.start()}else k.a.error("\u6ca1\u6709\u8f68\u8ff9")},n.onShowInfo=function(e){n.infoWindow?n.infoWindow.setPosition(new BMap.Point(e.longitude,e.latitude)):(n.infoWindow=new C,n.infoWindow.setPosition(new BMap.Point(e.longitude,e.latitude)),n.map.addOverlay(n.infoWindow)),n.infoWindow.setData(e),n.infoWindow.show()},n.onHideInfo=function(){n.infoWindow.hide()},n.onCPClick=function(e){},n.state={loading:!1,data:{},lbsSource:[],checked:!1,mode:"",filter:!0,speed:3500,lbsMarkers:[]},n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,o["PureComponent"]),n=t,(a=[{key:"componentDidMount",value:function(){this.initMap();var e=this.props,t=e.selectTradeTrack,n=e.searchParams;t(Object.assign(n,{coordinateType:"BD09"}))}},{key:"initMap",value:function(){var e=this;this.map=new BMap.Map(this.divMap,{minZoom:1,maxZoom:19,enableMapClick:!1}),this.map.enableScrollWheelZoom(!0),this.map.addEventListener("tilesloaded",function(){e.removeMapElement(document.querySelector(".anchorBL")),e.removeMapElement(document.querySelector(".BMap_cpyCtrl"))}),this.map.centerAndZoom("\u676d\u5dde",12)}},{key:"componentWillReceiveProps",value:function(e){var t=this;c()(this.state.data,e.data)||this.setState({data:e.data||{}},function(){t.initPlanMarkers(),t.initReachMarkers()}),this.state.lbsSource!==e.lbsSource&&this.setState({lbsSource:e.lbsSource||[],loading:!0},function(){t.map&&t.locationCP&&t.map.removeOverlay(t.locationCP),t.map&&t.lbsPolyline&&t.map.removeOverlay(t.lbsPolyline),t.lushu&&t.lushu._marker&&t.map.removeOverlay(t.lushu._marker),setTimeout(function(){t.locationMarker(),t.initLbsPolyline()},100),setTimeout(function(){t.setState({loading:!1})},200)})}},{key:"selectLbsTrack",value:function(){var e=this.state,t=e.mode,n=e.filter,a=this.props.data,o=a.utmsTradeWayPoints,i={partyId:a.driverId||"",mode:t,filter:n,returnFilterData:!0,datestart:a.signDate?a.signDate:r()().format("YYYY-MM-DD HH:mm:ss"),dateend:o.length&&o[o.length-1].reachDate?o[o.length-1].reachDate:r()().format("YYYY-MM-DD HH:mm:ss"),format:"BD09",collectType:2};this.props.selectLbsTrack(i)}},{key:"initReachMarkers",value:function(){var e=this,t=this.props.data,n=t.signLongitude,a=t.signLatitude;if(n&&a){var r=new y({type:2,data:{longitude:n,latitude:a},onClick:null,onShowInfo:null,onHideInfo:null});this.map.addOverlay(r)}t.utmsTradeWayPoints&&0!==t.utmsTradeWayPoints.length&&t.utmsTradeWayPoints.map(function(t){var n=new y({type:1===t.loadType?1:0,data:{longitude:t.reachLng,latitude:t.reachLat},onClick:null,onShowInfo:null,onHideInfo:null});e.map.addOverlay(n)})}},{key:"initMarker",value:function(e){var t=e.lng,n=e.lat,a=e.url,r=new BMap.Point(t,n),o=new BMap.Icon(a,new BMap.Size(34,42));return new BMap.Marker(r,{icon:o})}},{key:"initPlanMarkers",value:function(){var e=this.props.data.utmsTradeWayPoints;if(e){var t,n=[],a=0;e.map(function(e,r){if(0===r)t=new BMap.Point(e.longitude,e.latitude);else if(e.longitude&&e.latitude){var o=new BMap.Point(e.longitude,e.latitude);n[a]=o,a++}});var r=n[n.length-1];n.pop(),this.driving=new BMap.DrivingRoute(this.map,{renderOptions:{map:this.map,autoViewport:!0},policy:"BMAP_DRIVING_POLICY_LEAST_DISTANCE"}),this.driving.search(t,r,{waypoints:n})}}},{key:"locationMarker",value:function(){var e=this.props.lbsSource,t=e[e.length-1];e.length&&(this.locationCP=new y({type:3,data:t,onClick:this.onCPClick,onShowInfo:this.onShowInfo,onHideInfo:this.onHideInfo}),this.map.addOverlay(this.locationCP))}},{key:"initLbsPolyline",value:function(){var e=this.props.lbsSource;if(this.lushu=new Object,0!==e.length){var t=[];e.map(function(e,n){t[n]=new BMap.Point(e.longitude,e.latitude)}),this.lbsPolyline=new BMap.Polyline(t,{strokeColor:"#FF8000",strokeWeight:3,strokeOpacity:1}),this.map.addOverlay(this.lbsPolyline),this.setState({lbsMarkers:t}),this.lushu=new BMapLib.LuShu(this.map,t,{defaultContent:"",autoView:!0,icon:new BMap.Icon("http://lbsyun.baidu.com/jsdemo/img/car.png",new BMap.Size(52,26),{anchor:new BMap.Size(27,13)}),speed:this.state.speed,enableRotation:!0,landmarkPois:[]})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.lbsPoints;return o.createElement("div",{className:A.a.WaybillMap},o.createElement(O.a,{spinning:this.state.loading},o.createElement("div",{className:A.a.WaybillMap__box,ref:function(t){return e.divMap=t}})),o.createElement(V,{data:n,lbsPoints:a,onChange:function(t,n){e.handleInputChange(t,n)},handlePause:function(){e.handlePause()},handlePlayback:function(){e.handlePlayback()},handleChangeSwitch:function(t){e.handleChangeSwitch(t)}}))}}])&&G(n.prototype,a),i&&G(n,i),t}();t.default=function(e){var t=e.routeId,n=e.actions,a=function(e){return e.get(t)},r=Object(s.createStructuredSelector)({data:function(e){return Object(s.createSelector)(e,function(e){return e.get("data")})}(a),lbsSource:function(e){return Object(s.createSelector)(e,function(e){return e.get("lbsSource")})}(a),lbsPoints:function(e){return Object(s.createSelector)(e,function(e){return e.get("lbsPoints")})}(a),error:function(e){return Object(s.createSelector)(e,function(e){return e.get("error")})}(a),loading:function(e){return Object(s.createSelector)(e,function(e){return e.get("loading")})}(a)}),o=Object(i.connect)(r,function(e){return{selectTradeTrack:function(t){return e(n.selectTradeTrack(t))},selectLbsTrack:function(t){return e(n.selectLbsTrack(t))}}});return Object(l.c)(o)(K)}},kg9Z:function(e,t,n){e.exports={divInfoWindow:"_26UA0",divf:"R_jUN",curr:"xA2jk"}}}]);
//# sourceMappingURL=waybill-map.d9a1b81c.chunk.js.map