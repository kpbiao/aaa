(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{oaBe:function(e,t,n){"use strict";n.r(t);var r=n("2/Rp"),a=n("bx4M"),o=n("kPKH"),i=n("PArb"),u=n("Vl3Y"),c=n("5rEg"),s=n("BMrR"),l=n("2fM7"),p=n("EIz2"),f=n("dZay"),d=n.n(f),m=n("q1tI"),h=n("/MKj"),y=n("2iEm"),b=n("ANjH"),g=n("peh1"),x=n("Mpt7"),E=n("KrTs"),S=n("zY5m"),v=n.n(S);function F(e){return(F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==F(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=u.a.Item,k=l.a.Option,N=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=I(this,O(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),n.props.updateFilter(n.props.form.getFieldsValue())},n.handleReset=function(){n.props.form.resetFields(),n.props.updateFilter(),n.setStatus()},n.state={permissions:[]},n}var n,f,h;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,m["PureComponent"]),n=t,(f=[{key:"componentDidMount",value:function(){var e=this;this.setStatus(),this.props.doSearch(),this.handlePermissions(),d()("/fixpath/list","refresh").on(function(t){e.props.doSearch()})}},{key:"componentWillUnmount",value:function(){var e=this;d()("/fixpath/list","refresh").drop(function(t){e.props.doSearch()})}},{key:"handlePermissions",value:function(){var e=this.props.permissions;this.setState({permissions:e.toArray().map(function(e){return e.get("operateKey")})})}},{key:"setStatus",value:function(){(0,this.props.form.setFieldsValue)({status:""})}},{key:"renderFilterForm",value:function(){var e=this.props.form.getFieldDecorator;return m.createElement(u.a,{className:v.a.FixpathList__Form,layout:"inline",onSubmit:this.handleSubmit},m.createElement(s.a,{type:"flex"},m.createElement(o.a,{span:24},m.createElement(w,{label:"\u7ebf\u8def\u540d\u79f0",colon:!1},e("routeName")(m.createElement(c.a,{style:{width:"165px"}}))),m.createElement(w,{label:"\u5ba2\u6237\u540d\u79f0",colon:!1},e("customerName")(m.createElement(c.a,{style:{width:"165px"}}))),m.createElement(w,{label:"\u72b6\u6001",colon:!1},e("status")(m.createElement(l.a,null,m.createElement(k,{value:""},"\u5168\u90e8"),m.createElement(k,{value:"1"},"\u751f\u6548\u4e2d"),m.createElement(k,{value:"0"},"\u5931\u6548")))),m.createElement(w,{className:v.a.FixpathList__FormAction},m.createElement(r.a,{type:"primary",htmlType:"submit",style:{marginRight:"12px"}},"\u67e5 \u8be2"),m.createElement(r.a,{onClick:this.handleReset},"\u91cd \u7f6e")))))}},{key:"renderList",value:function(){var e=this,t=this.props,n=t.dataCount,r=t.doSearch,a=t.list,o=t.loading,u=t.pageIndex,c=["default","success"],s=["\u5931\u6548","\u751f\u6548\u4e2d"],l=this.state.permissions,f=l.includes("/fixpath/updatepath")&&l.includes("/fixpath/schedule"),d={columns:[{title:"\u8def\u7ebf\u540d\u79f0",dataIndex:"routeName",render:function(t,n){return l.includes("/fixpath/detail")?m.createElement(y.a,{to:"/fixpath/detail?id=".concat(n.routeId),onClick:function(){e.props.refresh("/fixpath/detail?id=".concat(n.routeId))}},t):m.createElement("span",null,t)}},{title:"\u72b6\u6001",dataIndex:"status",render:function(e){return m.createElement(E.a,{status:c[e],text:s[e]})}},{title:"\u5ba2\u6237\u540d\u79f0",dataIndex:"customerName"},{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"createDate"},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"phone"},{title:"\u64cd\u4f5c",key:"action",render:function(e){return m.createElement(m.Fragment,null,l.includes("/fixpath/updatepath")?m.createElement(y.a,{to:"/fixpath/updatepath?id=".concat(e.routeId)},"\u4fee\u6539"):"",f?m.createElement(i.a,{type:"vertical"}):"",l.includes("/fixpath/schedule")?m.createElement(y.a,{to:"/fixpath/schedule?routeId=".concat(e.routeId)},"\u8fd0\u529b\u8ba1\u5212"):"")}}],dataSource:a.map(function(e){return{key:e.get("routeId"),routeName:e.get("routeName"),status:e.get("status"),customerName:e.get("customerName"),routeId:e.get("routeId"),createDate:e.get("createDate"),phone:e.getIn(["routeWayPoints",0,"phone"])}}).toArray(),loading:o,pagination:{current:u,total:n,onChange:function(e,t){r(e,t)},onShowSizeChange:function(e){r({skipCount:e.skipCount,pageSize:e.pageSize})}}};return m.createElement(p.a,d)}},{key:"render",value:function(){var e=this.state.permissions;return m.createElement(a.a,{title:"\u56fa\u5b9a\u7ebf\u8def",bordered:!0,className:v.a.FixpathList,extra:e.includes("/fixpath/addpath")?m.createElement(y.a,{to:"/fixpath/addpath"},m.createElement(r.a,{type:"primary"},"\u65b0\u5efa\u7ebf\u8def")):""},this.renderFilterForm(),this.renderList())}}])&&_(n.prototype,f),h&&_(n,h),t}();t.default=function(e){var t=e.routeId,n=e.actions,r=function(e){return e.get(t)},a=Object(g.createStructuredSelector)({error:function(e){return Object(g.createSelector)(e,function(e){return e.get("error")})}(r),loading:function(e){return Object(g.createSelector)(e,function(e){return e.get("loading")})}(r),list:function(e){return Object(g.createSelector)(e,function(e){return e.get("data",Object(x.List)())})}(r),dataCount:function(e){return Object(g.createSelector)(e,function(e){return e.get("dataCount")})}(r),pageIndex:function(e){return Object(g.createSelector)(e,function(e){return e.get("pageIndex")})}(r)}),o=Object(h.connect)(a,function(e){return{doSearch:function(t,r){return e(n.getList(t,r))},updateFilter:function(t){return e(n.updateFilter(t))}}});return Object(b.c)(o,u.a.create())(N)}},zY5m:function(e,t,n){e.exports={FixpathList:"_39G_F",FixpathList__Form:"iwsbU",FixpathList__FormAction:"_3s49j",__RightAction:"_2VGYB"}}}]);
//# sourceMappingURL=fixpath-list.e492140d.chunk.js.map