(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"9qUe":function(e,t,r){e.exports={LtlOrderEdit:"-Jw3s"}},Uluz:function(e,t,r){"use strict";r.r(t);var n=r("q1tI"),a=r("/MKj"),o=r("ANjH"),i=r("peh1"),l=r("2/Rp"),c=r("kPKH"),u=r("Vl3Y"),s=r("5rEg"),m=r("tsqr"),p=r("kLXV"),d=r("9yH6"),f=r("BMrR"),h=r("2fM7"),y=r("SGqP"),b=r("+eQT"),g=r("frwj"),v=r.n(g),E=r("wd/R"),O=r.n(E);function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return!t||"object"!==S(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=j(this,(e=C(t)).call.apply(e,[this].concat(a)))).onChange=function(e){r.props.onChange&&(e?r.props.onChange(e.format("YYYY-MM-DD HH:mm")):r.props.onChange(""))},r}var r,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,n["PureComponent"]),r=t,(a=[{key:"render",value:function(){var e=this.props,t=e.placeholder,r=e.value,a=r?O()(r,"YYYY-MM-DD HH:mm"):null;return n.createElement("div",{className:v.a.DateTimePicker},n.createElement(b.a,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:t,value:a,onChange:this.onChange}))}}])&&w(r.prototype,a),o&&w(r,o),t}(),I=r("bx4M"),V=r("YAXr"),_=r.n(V),D=function(e){return n.createElement("div",{className:_.a.FormEditCard},n.createElement(I.a,{title:e.title,bordered:!0,style:{width:"100%"}},e.children))},k={lg:{span:8},md:{span:12},xs:{span:24}},q={labelCol:{xs:{span:24}},wrapperCol:{xs:{span:24}}},T=r("ayp/"),A=r("qrex");function B(e){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var H=h.a.Option,F=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=R(t).call(this,e))||"object"!==B(a)&&"function"!==typeof a?M(n):a).setDefaultValue=!1,r.setCustomers=!1,r.state={options:[]},r.onChange=r.onChange.bind(M(M(r))),r}var r,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,n["PureComponent"]),r=t,(a=[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.customers&&!this.setCustomers){this.setCustomers=!0;var r=this.renderOptions(e.customers);this.setState(function(n,a){return n.options.push(r),e.value?{options:n.options}:(e.customers[0]&&t.props.onChange({name:e.customers[0].customerName,code:e.customers[0].customerCode}),{defaultValue:e.customers[0]?e.customers[0].customerName:"",options:n.options})})}if(e.value&&!this.setDefaultValue){this.setDefaultValue=!0;var n=L(e.value.split(","),2),a=n[0];n[1];this.setState({defaultValue:a})}}},{key:"render",value:function(){var e=this.state,t=e.options,r=e.defaultValue;return n.createElement(h.a,{value:r,onChange:this.onChange,disabled:this.props.disabled},t)}},{key:"onChange",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var r=L(e.split(","),2),n=r[0],a=r[1];if(this.props.onChange({name:n,code:a}),!t)return n;this.setState({defaultValue:n})}}},{key:"renderOptions",value:function(e){return e?e.map(function(e,t){return n.createElement(H,{key:e.customerCode+t,value:"".concat(e.customerName,",").concat(e.customerCode)},e.customerName)}):[]}}])&&N(r.prototype,a),o&&N(r,o),t}(),U=r("6GNf"),G=r("NQij"),J=r("9qUe"),Q=r.n(J);function W(e){return(W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}h.a.Option;var te=d.a.Group,re=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Z(this,(e=$(t)).call.apply(e,[this].concat(a)))).repeatSubmit=!1,r.handleSubmit=function(e){e.preventDefault();var t=r.props,n=t.searchParams,a=t.data;r.props.form.validateFields(function(e,t){if(!e&&!r.repeatSubmit){r.handleRepeatSubmit();var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){K(e,t,r[t])})}return e}({},t);if(o.requireDate&&(o.requireDate=o.requireDate.length>16?o.requireDate:o.requireDate+":00"),n&&n.id)return o.utmsPartOrderId=a.utmsPartOrderId,r.props.updatePartOrder(o);r.props.insertPartOrder(o)}})},r.handleRepeatSubmit=function(){r.repeatSubmit=!r.repeatSubmit,setTimeout(function(){r.repeatSubmit=!r.repeatSubmit},1e3)},r.cancel=function(e){var t=r.props,n=t.close;t.form.isFieldsTouched()?r.cancleEdit(n):n()},r.customerChange=function(e){(0,r.props.form.setFieldsValue)({customerCode:e.code,customerName:e.name})},r.onAddressSelected=function(e){(0,r.props.form.setFieldsValue)({longitude:e?e.lng:"",latitude:e?e.lat:"",province:e?e.province+e.city+e.region:""})},r.cancleEdit=function(e){r.props.form;p.a.confirm({title:"\u6709\u672a\u4fdd\u5b58\u7684\u4fe1\u606f",content:"\u5982\u653e\u5f03\uff0c\u586b\u5199\u7684\u4fe1\u606f\u5c06\u4e22\u5931",okText:"\u7ee7\u7eed\u586b\u5199",cancelText:"\u653e\u5f03",iconType:"info-circle",centered:!0,onCancel:function(){e&&e()}})},r}var r,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,n["PureComponent"]),r=t,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.searchParams,n=t.getAsyncData,a=t.getCustomerData,o=(t.toList,t.routeIds,t.refresh,t.eventEmitter),i=t.form;a(),r&&r.id&&n({utmsPartOrderId:r.id}),o.on("close",function(t,r){"FROM_TAB_CLOSE"!==r&&"FROM_TAB_REFRESH"!==r||!i.isFieldsTouched()?t():e.cancleEdit(t)})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.insert,r=e.searchParams,n=e.close,a=e.toList,o=e.routeIds;if(t&&"success"===t.result){var i="\u5f00\u5355\u6210\u529f";r&&r.id&&(i="\u4fee\u6539\u6210\u529f"),m.a.success(i),n();var l="";r&&r.id&&(l=r.back?decodeURIComponent(r.back):l);var c=[],u=!0,s=!1,p=void 0;try{for(var d,f=o[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value;(h.split("?").includes("/ltlOrder")||l&&h.indexOf(l)>=0||h.split("&").includes("/ltlOrder/detail?id=".concat(r.id)))&&c.push(h)}}catch(e){s=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw p}}a(l,c)}}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.data||{},r=t.customerName,a=void 0===r?"":r,o=t.customerCode,i=void 0===o?"":o,m=t.thirdSystemId,p=void 0===m?"":m,h=t.requireDate,b=void 0===h?"":h,g=t.contact,v=void 0===g?"":g,E=t.phone,O=void 0===E?"":E,S=t.province,w=void 0===S?"":S,j=t.address,C=void 0===j?"":j,P=t.longitude,I=void 0===P?"":P,V=t.latitude,_=void 0===V?"":V,B=t.goodsName,L=void 0===B?"":B,N=t.goodsNumber,R=void 0===N?"":N,Y=t.goodsWeight,M=void 0===Y?"":Y,H=t.goodsVolume,J=void 0===H?"":H,W=t.delegateAmount,K=void 0===W?"":W,z=t.isReceipt,Z=void 0===z||z,$=t.remark,ee=void 0===$?"":$,re=this.props,ne=re.loading,ae=re.searchParams,oe=a&&i?"".concat(a,",").concat(i):"";return n.createElement("div",{className:Q.a.LtlOrderEdit},n.createElement(u.a,{onSubmit:this.handleSubmit,layout:"vertical"},n.createElement(D,{title:"\u57fa\u672c\u4fe1\u606f"},n.createElement(f.a,{gutter:16},n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u5ba2\u6237",style:{marginBottom:0}}),n.createElement(F,{value:oe,onChange:this.customerChange,customers:this.props.customers,disabled:!(!ae||!ae.id)}),e("customerName",{initialValue:a,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba2\u6237"}]})(n.createElement(s.a,{type:"hidden"}))),n.createElement(u.a.Item,X({},q,{style:{marginBottom:0}}),e("customerCode",{initialValue:i})(n.createElement(s.a,{type:"hidden"})))),n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u7b2c\u4e09\u65b9\u8ba2\u5355\u53f7"}),e("thirdSystemId",{initialValue:p})(n.createElement(s.a,{maxLength:40,placeholder:"\u8bf7\u8f93\u5165\u7b2c\u4e09\u65b9\u5355\u53f7"}))))),n.createElement(f.a,{gutter:16},n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u8981\u6c42\u9001\u8fbe\u65f6\u95f4"}),e("requireDate",{initialValue:b})(n.createElement(x,{placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4"}))))),n.createElement(f.a,{gutter:16},n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u6536\u8d27\u4eba"}),n.createElement(c.a,{span:11},e("contact",{initialValue:v,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6536\u8d27\u4eba\u59d3\u540d"}]})(n.createElement(s.a,{maxLength:40,placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),n.createElement(c.a,{span:2},n.createElement("span",{style:{display:"inline-block",position:"relative",width:"100%",top:"3px",textAlign:"center"}},"--")),n.createElement(c.a,{span:11},n.createElement(u.a.Item,null,e("phone",{initialValue:O,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"},{pattern:G.a,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8054\u7cfb\u65b9\u5f0f"}]})(n.createElement(s.a,{maxLength:40,placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u65b9\u5f0f"})))))),n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u6536\u8d27\u5730\u5740",style:{marginBottom:0,paddingBottom:0}}),e("address",{initialValue:C,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6536\u8d27\u5730\u5740"}]})(n.createElement(y.a,{placeholder:"\u8bf7\u8f93\u5165\u6536\u8d27\u5730\u5740",onSelected:this.onAddressSelected}))),n.createElement(u.a.Item,X({},q,{style:{marginBottom:0,paddingBottom:0}}),e("longitude",{initialValue:I})(n.createElement(s.a,{type:"hidden",placeholder:"\u8bf7\u5728\u5730\u56fe\u4e0a\u6807\u70b9"}))),n.createElement(u.a.Item,X({},q,{style:{marginBottom:0,paddingBottom:0}}),e("latitude",{initialValue:_})(n.createElement(s.a,{type:"hidden",placeholder:"\u8bf7\u5728\u5730\u56fe\u4e0a\u6807\u70b9"}))),n.createElement(u.a.Item,X({},q,{style:{marginBottom:0,paddingBottom:0}}),e("province",{initialValue:w})(n.createElement(s.a,{type:"hidden"}))))),n.createElement(f.a,{gutter:16},n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u5907\u6ce8"}),e("remark",{initialValue:ee})(n.createElement(A.a,{maxLength:500,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})))),n.createElement(c.a,{span:8}))),n.createElement(D,{title:"\u8d27\u7269\u4fe1\u606f"},n.createElement(f.a,{gutter:16},n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u8d27\u7269\u540d\u79f0"}),e("goodsName",{initialValue:L,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d27\u7269\u540d\u79f0"},{min:2,max:200,type:"string",message:"\u8bf7\u8f93\u51652-200\u4e2a\u5b57"}]})(n.createElement(s.a,{maxLength:200,placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u540d\u79f0"}))))),n.createElement(f.a,{gutter:16},n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u91cd\u91cf\uff08\u5343\u514b\uff09"}),e("goodsWeight",{initialValue:M,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u91cd\u91cf"},{validator:Object(U.a)("\u8bf7\u8f93\u51650-99999.99\uff0c\u652f\u6301\u4e24\u4f4d\u5c0f\u6570",{max:99999.99,min:.01,decimal:2})}]})(n.createElement(s.a,{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u91cd\u91cf"})))),n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u4f53\u79ef\uff08\u65b9\uff09"}),e("goodsVolume",{initialValue:J,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f53\u79ef"},{validator:Object(U.a)("\u8bf7\u8f93\u51650-99.99\uff0c\u652f\u6301\u4e24\u4f4d\u5c0f\u6570",{max:99.99,min:.01,decimal:2})}]})(n.createElement(s.a,{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u4f53\u79ef"})))),n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u4ef6\u6570\uff08\u4ef6\uff09"}),e("goodsNumber",{initialValue:R,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef6\u6570"},{validator:Object(U.a)("\u8bf7\u8f93\u51650-500\uff0c\u53ea\u80fd\u8f93\u5165\u6574\u6570",{max:500,min:1,decimal:0})}]})(n.createElement(s.a,{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u4ef6\u6570"})))))),n.createElement(D,{title:"\u589e\u503c\u670d\u52a1"},n.createElement(f.a,{gutter:16},n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u56de\u5355",style:{marginBottom:0,paddingBottom:0}}),e("isReceipt",{initialValue:"\u6ca1\u6709"===Z?0:1})(n.createElement(te,null,n.createElement(d.a,{value:1},"\u6709"),n.createElement(d.a,{value:0},"\u65e0"))))),n.createElement(c.a,k,n.createElement(u.a.Item,X({},q,{label:"\u4ee3\u6536\uff08\u5143\uff09",style:{marginBottom:0,paddingBottom:0}}),e("delegateAmount",{initialValue:K,rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u4ee3\u6536"},{validator:Object(U.a)("\u8bf7\u8f93\u51650-9999999.99\uff0c\u652f\u6301\u4e24\u4f4d\u5c0f\u6570",{max:9999999.99,min:0,decimal:2})}]})(n.createElement(s.a,{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u4ee3\u6536"})))))),n.createElement(T.a,{rightChild:n.createElement(T.b,{buttons:[n.createElement(l.a,{key:1,onClick:this.cancel},"\u53d6\u6d88"),n.createElement(l.a,{key:2,type:"primary",htmlType:"submit",loading:ne},ae&&ae.id?"\u4fdd\u5b58":"\u786e\u8ba4\u5f00\u5355")]})})))}}])&&z(r.prototype,a),o&&z(r,o),t}();t.default=function(e){var t=e.routeId,r=e.actions,n=function(e){return e.get(t)},l=Object(i.createStructuredSelector)({error:function(e){return Object(i.createSelector)(e,function(e){return e.get("error")})}(n),loading:function(e){return Object(i.createSelector)(e,function(e){return e.get("loading")})}(n),data:function(e){return Object(i.createSelector)(e,function(e){return e.get("data")})}(n),insert:function(e){return Object(i.createSelector)(e,function(e){return e.get("insert")})}(n),customers:function(e){return Object(i.createSelector)(e,function(e){return e.get("customers")})}(n),routeIds:function(e){return Object(i.createSelector)(e,function(e){return e.getIn(["route","routeIds"])})}(function(e){return e.get("global")})}),c=Object(a.connect)(l,function(e){return{getAsyncData:function(t){return e(r.getAsyncData(t))},insertPartOrder:function(t){return e(r.insertPartOrder(t))},updatePartOrder:function(t){return e(r.updatePartOrder(t))},getCustomerData:function(){return e(r.getCustomerData())},toList:function(t,n){return e(r.toList(t,n))}}}),s=u.a.create()(re);return Object(o.c)(c)(s)}},YAXr:function(e,t,r){e.exports={FormEditCard:"_1GqvQ"}},frwj:function(e,t,r){}}]);
//# sourceMappingURL=ltl-order-edit.74e43309.chunk.js.map