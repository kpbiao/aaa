(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"2KPX":function(e,t,r){"use strict";r.r(t);var n=r("KrTs"),a=r("2/Rp"),i=r("bx4M"),o=r("kPKH"),c=r("+eQT"),l=r("Vl3Y"),s=r("5rEg"),u=r("NJEC"),d=r("BMrR"),p=r("2fM7"),m=r("EIz2"),h=r("f/1f"),f=r("dZay"),g=r.n(f),y=r("q1tI"),v=r("/MKj"),b=r("2iEm"),S=r("ANjH"),C=r("peh1"),E=r("lMyb"),O=r("VOR8"),k=r.n(O);function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){D(e,t,r[t])})}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=p.a.Option,L=c.a.RangePicker,M=l.a.Item,T={sm:24,xs:24,md:12,lg:12,xl:6},G={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},colon:!1},R=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=N(this,P(t).call(this,e))).handleSearch=function(e){e.preventDefault();var t=r.getSearchData();r.props.updateFilter(t)},r.handleReset=function(){r.props.form.resetFields(),r.setStatus(),r.props.updateFilter()},r.paginationChange=function(e){var t=e.skipCount,n=e.pageSize,a=e.current;r.setState({skipCount:t,pageSize:n}),r.props.getOrderListData({pageSize:n,skipCount:t},0===a?1:a)},r.state={permissions:[],skipCount:0,pageSize:15},r}var r,c,f;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,y["PureComponent"]),r=t,(c=[{key:"componentDidMount",value:function(){var e=this;this.setStatus(),this.initSearch(),this.handlePermissions(),g()("/vehicleOrder/list","refresh").on(function(t){e.initSearch()}),g()("GLOBAL","activeRouteId","change").on(function(e){})}},{key:"componentWillUnmount",value:function(){var e=this;g()("/vehicleOrder/list","refresh").drop(function(t){e.initSearch()})}},{key:"handlePermissions",value:function(){var e=this.props.permissions;this.setState({permissions:e.toArray().map(function(e){return e.get("operateKey")})})}},{key:"render",value:function(){return y.createElement("div",{className:k.a.VehicleOrder},y.createElement(i.a,{style:{width:"100%"}},this.renderTopCard()),y.createElement(i.a,{title:"\u6574\u8f66\u8ba2\u5355",extra:this.renderAddBtn(),style:{marginTop:12}},this.renderSelectBar(),this.renderTable()))}},{key:"initSearch",value:function(){this.props.getStatistics(),this.props.getOrderListData()}},{key:"renderCard",value:function(e,t){return y.createElement("div",{className:k.a.CardSingle},y.createElement("div",{className:k.a.CardSingle_label},e),y.createElement("div",{className:k.a.CardSingle_value},t||0))}},{key:"renderTopCard",value:function(){var e=this.props.statistics;return y.createElement("div",{className:k.a.TopCard},this.renderCard("\u603b\u8ba2\u5355",e.get("total")),this.renderCard("\u5f85\u8c03\u5ea6",e.get("pendingScheduling")),this.renderCard("\u914d\u9001\u4e2d",e.get("distribution")),this.renderCard("\u5df2\u7b7e\u6536",e.get("haveSignedIn")),this.renderCard("\u672a\u7b7e\u6536",e.get("notSigned")))}},{key:"renderAddBtn",value:function(){var e=this.state.permissions;return y.createElement(d.a,{style:{textAlign:"right"}},e.includes("/vehicleOrder/add")?y.createElement(b.a,{to:"/vehicleOrder/add"},y.createElement(a.a,{type:"primary"},"\u6574\u8f66\u5f00\u5355")):"")}},{key:"setStatus",value:function(){(0,this.props.form.setFieldsValue)({status:""})}},{key:"renderSelectBar",value:function(){var e=this.props.form.getFieldDecorator;return y.createElement("div",{className:k.a.SelectBar},y.createElement(l.a,{onSubmit:this.handleSearch},y.createElement(d.a,{gutter:16},y.createElement(o.a,x({className:"gutter-row"},T),y.createElement(M,x({},G,{label:"\u8ba2\u5355\u72b6\u6001"}),e("status")(y.createElement(p.a,{style:{width:"100%"}},y.createElement(_,{value:""},"\u5168\u90e8"),y.createElement(_,{value:"0"},"\u5f85\u53d1\u8d27"),y.createElement(_,{value:"1"},"\u5f85\u8c03\u5ea6"),y.createElement(_,{value:"2"},"\u914d\u9001\u4e2d"),y.createElement(_,{value:"3"},"\u5df2\u7b7e\u6536"),y.createElement(_,{value:"4"},"\u672a\u7b7e\u6536"))))),y.createElement(o.a,T,y.createElement(M,x({},G,{label:"\u4e0b\u5355\u65f6\u95f4"}),e("gmtCreateGte")(y.createElement(L,{style:{width:"100%"}})))),y.createElement(o.a,T,y.createElement(M,x({},G,{label:"\u7528\u8f66\u65f6\u95f4"}),e("useCarDateGte")(y.createElement(L,{style:{width:"100%"}}))))),y.createElement(d.a,{gutter:16},y.createElement(o.a,T,y.createElement(M,x({},G,{label:"\u5ba2\u6237\u540d\u79f0"}),e("customerName")(y.createElement(s.a,{placeholder:"\u8bf7\u8f93\u5165"})))),y.createElement(o.a,T,y.createElement(M,x({},G,{label:"\u8ba2\u5355\u53f7"}),e("orderNumber")(y.createElement(s.a,{placeholder:"\u8bf7\u8f93\u5165"})))),y.createElement(o.a,T,y.createElement(M,x({},G,{label:"\u7b2c\u4e09\u65b9\u8ba2\u5355\u53f7"}),e("thirdSystemId")(y.createElement(s.a,{placeholder:"\u8bf7\u8f93\u5165"})))),y.createElement(o.a,x({},T,{style:{marginTop:5}}),y.createElement(a.a,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),y.createElement(a.a,{style:{marginLeft:12},onClick:this.handleReset},"\u91cd\u7f6e")))))}},{key:"renderTable",value:function(){var e=this,t=this.props,r=t.dataCount,a=(t.getOrderListData,t.orderList),i=t.loading,o=t.pageIndex,c=this.state.permissions,l=(c.includes("delete")&&(c.includes("send")||c.includes("/vehicleOrder/update")),c.includes("send")&&c.includes("/vehicleOrder/update"),["default","default","processing","success","error"]),s=["\u5f85\u53d1\u8d27","\u5f85\u8c03\u5ea6","\u914d\u9001\u4e2d","\u5df2\u7b7e\u6536","\u672a\u7b7e\u6536"],d=[{title:"\u5ba2\u6237",width:150,dataIndex:"customerName",key:"customerName",fixed:"left"},{title:"\u8ba2\u5355\u53f7",width:220,dataIndex:"orderNumber",key:"orderNumber",render:function(t,r){return c.includes("/vehicleOrder/detail")?y.createElement(b.a,{to:"/vehicleOrder/detail?id=".concat(r.orderWholeCarId),onClick:function(){e.props.refresh("/vehicleOrder/detail?id=".concat(r.orderWholeCarId))}},t):y.createElement("span",null,t)},fixed:"left"},{title:"\u7b2c\u4e09\u65b9\u8ba2\u5355\u53f7",width:200,dataIndex:"thirdSystemId",key:"thirdSystemId"},{title:"\u4e0b\u5355\u65f6\u95f4",width:180,dataIndex:"gmtCreate",key:"gmtCreate"},{title:"\u7528\u8f66\u65f6\u95f4",width:180,dataIndex:"useCarDate",key:"useCarDate"},{title:"\u8981\u6c42\u9001\u8fbe\u65f6\u95f4",width:180,dataIndex:"requireDate",key:"requireDate"},{title:"\u6240\u9700\u8f66\u578b",dataIndex:"car",key:"car"},{title:"\u72b6\u6001",width:100,dataIndex:"status",key:"status",render:function(e){return y.createElement(n.a,{status:l[e],text:s[e]})}}];a.filter(function(e){return 0===e.get("status")}).size>0&&d.push({title:"\u64cd\u4f5c",width:105,dataIndex:"carStruct",key:"action",render:function(t,r){return y.createElement("span",null,0===r.status?y.createElement("span",null,y.createElement(h.a,null,c.includes("send")?y.createElement(u.a,{title:"\u662f\u5426\u786e\u8ba4\u53d1\u8d27\uff1f",onConfirm:function(){e.sendGood(r.orderWholeCarId)}},y.createElement("a",{href:"javascript:void(0);"},"\u53d1\u8d27")):null,c.includes("/vehicleOrder/update")?y.createElement(b.a,{to:"/vehicleOrder/update?id=".concat(r.orderWholeCarId)},"\u4fee\u6539"):null,c.includes("delete")?y.createElement(u.a,{title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:function(){e.deleOrder(r.orderWholeCarId)}},y.createElement("a",{href:"javascript:void(0);"},"\u5220\u9664")):null)):null)},fixed:"right"});var p={columns:d,dataSource:a.map(function(e){return{key:e.get("orderWholeCarId"),orderWholeCarId:e.get("orderWholeCarId"),customerName:e.get("customerName"),thirdSystemId:e.get("thirdSystemId")||E.a.emptyRecord,orderNumber:e.get("orderNumber"),gmtCreate:e.get("gmtCreate"),useCarDate:e.get("useCarDate")||E.a.emptyRecord,requireDate:e.get("requireDate")||E.a.emptyRecord,carStruct:e.get("carStruct"),carLong:e.get("carLong"),car:e.get("carLong")?e.get("carLong")/1e3+"\u7c73"+e.get("carStruct"):e.get("carStruct"),status:e.get("status")}}).toArray(),scroll:{x:1500},loading:i,pagination:{current:o,total:r,onChange:this.paginationChange,onShowSizeChange:this.paginationChange}};return y.createElement(m.a,p)}},{key:"getSearchData",value:function(){var e=this.props.form.getFieldsValue(),t=e.gmtCreateGte,r=e.useCarDateGte,n={gmtCreateGte:t&&t.length?t[0].format("YYYY-MM-DD 00:00:00"):"",gmtCreateLte:t&&t.length?t[1].format("YYYY-MM-DD 23:59:59"):"",useCarDateGte:r&&r.length?r[0].format("YYYY-MM-DD 00:00:00"):"",useCarDateLte:r&&r.length?r[1].format("YYYY-MM-DD 23:59:59"):""};return Object.assign(e,n)}},{key:"sendGood",value:function(e){var t=this.state,r=t.skipCount,n=t.pageSize,a=this.props.pageIndex,i=this.getSearchData();this.props.sendGood(w({orderWholeCarId:e,pageIndex:a,pageSize:n,skipCount:r},i))}},{key:"deleOrder",value:function(e){var t=this.state,r=t.skipCount,n=t.pageSize,a=this.props.pageIndex,i=this.getSearchData();this.props.deleOrder(w({orderWholeCarId:e,pageIndex:a,pageSize:n,skipCount:r},i))}}])&&j(r.prototype,c),f&&j(r,f),t}();t.default=function(e){var t=e.routeId,r=e.actions,n=function(e){return e.get(t)},a=Object(C.createStructuredSelector)({error:function(e){return Object(C.createSelector)(e,function(e){return e?e.get("error"):""})}(n),loading:function(e){return Object(C.createSelector)(e,function(e){return e.get("loading")})}(n),orderList:function(e){return Object(C.createSelector)(e,function(e){return e.get("data")})}(n),dataCount:function(e){return Object(C.createSelector)(e,function(e){return e.get("dataCount")})}(n),pageIndex:function(e){return Object(C.createSelector)(e,function(e){return e.get("pageIndex")})}(n),statistics:function(e){return Object(C.createSelector)(e,function(e){return e.get("statistics")})}(n)}),i=Object(v.connect)(a,function(e){return{getOrderListData:function(t,n){return e(r.getOrderListData(t,n))},updateFilter:function(t){return e(r.updateFilter(t))},deleOrder:function(t){return e(r.deleOrder(t))},sendGood:function(t){return e(r.sendGood(t))},getStatistics:function(t){return e(r.getStatistics(t))}}});return Object(S.c)(i,l.a.create())(R)}},VOR8:function(e,t,r){e.exports={VehicleOrder:"_22qjn",TopCard:"_36lP1",CardSingle:"_1Qg4d",CardSingle_label:"PDDyd",CardSingle_value:"_2wQMm",SelectBar:"_3bZ6S"}}}]);
//# sourceMappingURL=vehicle-order.20e84a1d.chunk.js.map